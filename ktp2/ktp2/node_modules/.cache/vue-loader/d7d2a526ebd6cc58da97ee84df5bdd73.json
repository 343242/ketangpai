{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Login\\Login.vue?vue&type=style&index=0&id=2c86e14e&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Login\\Login.vue","mtime":1592566320000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5vdXRlciB7CiAgaGVpZ2h0OiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6Y2VudGVyOwp9Cgoub3V0ZXI+ZGl2IHsKICB3aWR0aDogNDgwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3gtc2hhZG93OiAwIDNweCA1cHggcmdiYSgwLCAwLCAwLCAuMik7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Cgoub3V0ZXI+ZGl2PmRpdjpmaXJzdC1jaGlsZCB7CiAgZm9udC1zaXplOiAyNnB4OwogIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLU1lZGl1bTsKICBmb250LXdlaWdodDogNTAwOwogIGNvbG9yOiByZ2JhKDU5LCA2MSwgNjksIDEpOwogIHBhZGRpbmctdG9wOiA1M3B4OwogIHBhZGRpbmctYm90dG9tOiA1OHB4OwogIHBhZGRpbmctbGVmdDogMzBweDsKfQoKLm91dGVyPmRpdj5kaXY6bnRoLWNoaWxkKDIpIHsKICBwYWRkaW5nLWxlZnQ6IDMwcHg7CiAgcGFkZGluZy1yaWdodDogMzBweDsKICBwYWRkaW5nLWJvdHRvbTogNjBweDsKfQoKLm91dGVyPmRpdj5kaXY6bnRoLWNoaWxkKDMpIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxODBweDsKICBsZWZ0OiA4NXB4OwogIGRpc3BsYXk6IG5vbmU7Cn0KCmlucHV0IHsKICBvdXRsaW5lOiBub25lOwogIGZvbnQtc2l6ZTogMTZweDsKICBwYWRkaW5nLWxlZnQ6IDEycHg7CiAgaGVpZ2h0OiA2NHB4OwogIHdpZHRoOiA0MDZweDsKICBib3JkZXI6IHJnYmEoMjI2LDIzMCwyMzcsMSkgMXB4IHNvbGlkOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBtYXJnaW4tYm90dG9tOiAyNHB4Owp9CmlucHV0OmZvY3VzIHsKICBib3JkZXI6IHJnYmEoNTAsIDE4NiwgMjQwLCAxKSAxcHggc29saWQ7CiAgdHJhbnNpdGlvbjogLjNzOwp9CgouZWwtY2hlY2tib3ggewogIHBhZGRpbmctdG9wOiAyMHB4OwogIHBhZGRpbmctYm90dG9tOiAyMHB4OwogIG1hcmdpbi1ib3R0b206IDI1cHg7Cn0KCi5sb2dpbi1idG4gewogIGhlaWdodDogNTBweDsKICB3aWR0aDogNDIwcHg7CiAgZm9udC1zaXplOiAxNnB4OwogIGNvbG9yOiAjZmZmOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsaW5lLWhlaWdodDogNTBweDsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgYmFja2dyb3VuZDogIzMyYmFmMDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdXNlci1zZWxlY3Q6IG5vbmU7Cn0KCi5sb2dpbi1idG46aG92ZXIgewogIHRyYW5zaXRpb246IC4yczsKICBiYWNrZ3JvdW5kOiAjNzRiOWZmOwp9CgoucmVnaXN0ZXIgewogIHRleHQtYWxpZ246IHJpZ2h0OwogIGZvbnQtc2l6ZTogMTRweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgcGFkZGluZzogMTVweCAwIDE1cHggMDsKfQoucmVnaXN0ZXIgc3BhbjpmaXJzdC1jaGlsZCB7CiAgY29sb3I6ICNBRkIxQjM7Cn0KLnJlZ2lzdGVyIHNwYW46bGFzdC1jaGlsZCB7CiAgY29sb3I6ICMzMkJBRjA7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\r\n  <div class=\"outer\">\r\n    <div>\r\n      <div>账号登录</div>\r\n      <div>\r\n        <div><input type=\"text\" placeholder=\"请输入账号\" v-model=\"account\" /></div>\r\n        <div><input type=\"password\" placeholder=\"请输入密码\" v-model=\"pwd\" /></div>\r\n        <div><el-checkbox v-model=\"checked\">下次自动登录</el-checkbox></div>\r\n        <div><div class=\"login-btn\" @click=\"test\">登录</div></div>\r\n        <div class=\"register\"><span @click=\"register\">还没有账号？</span><span @click=\"register\">去注册</span></div>\r\n      </div>\r\n\r\n      <div>\r\n        <slide-verify ref=\"slideblock\" :l=\"42\"\r\n            :r=\"10\"\r\n            :w=\"310\"\r\n            :h=\"155\"\r\n            :imgs=\"imgs\"\r\n            slider-text=\"向右滑动\"\r\n            @success=\"onSuccess\"\r\n            @fail=\"onFail\"\r\n            ></slide-verify>\r\n      </div>\r\n      \r\n    </div>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport verify1 from 'assets/img/verify1.jpg'\r\nimport verify2 from 'assets/img/verify2.jpeg'\r\nimport verify3 from 'assets/img/verify3.jpg'\r\nimport verify4 from 'assets/img/verify4.jpg'\r\nimport verify5 from 'assets/img/verify5.jpg'\r\nimport verify6 from 'assets/img/verify6.jpg'\r\nimport verify7 from 'assets/img/verify7.jpg'\r\nimport {request} from 'network/request'\r\nimport {IS_LOGIN, CHANGE_UID, USER_AVATAR, PERMISSION, CHANGE_NAME} from \"../../store/mutation-type\"\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      account: '',\r\n      pwd: '',\r\n      checked: false,\r\n      imgs: [verify1, verify2, verify3, verify4, verify5, verify6, verify7]\r\n    }\r\n  },\r\n  methods: {\r\n    register() {\r\n      this.$router.push(\"/register\")\r\n    },\r\n    onSuccess(){\r\n      // 登录请求\r\n      request({\r\n        url: '/api/verify',\r\n        method: 'get',\r\n        params: {\r\n          password: this.pwd,\r\n          account: this.account,\r\n          func: 'login'\r\n        }\r\n\r\n      }).then(res => {\r\n        if (res.data) {\r\n          this.$store.commit(IS_LOGIN, this.account)\r\n          // 请求用户的完整信息，保存到全局中-->uid\r\n          request({\r\n            url: '/api/findOneEntity',\r\n            method: 'get',\r\n            params: {\r\n              account: this.account\r\n            }\r\n          }).then(res => {\r\n            this.$store.commit(CHANGE_UID, res.data.userId)\r\n            this.$store.commit(USER_AVATAR, res.data.avatar)\r\n            this.$store.commit(PERMISSION, res.data.permission.pid)\r\n            this.$store.commit(CHANGE_NAME, res.data.name)\r\n\r\n            // 若点了自动登录，将存放一部分数据到cookie中\r\n            if (this.checked) {\r\n              this.$cookies.set('user', {\r\n                uid: res.data.userId,\r\n                avatar: res.data.avatar,\r\n                permission: res.data.permission.pid,\r\n                name: res.data.name,\r\n                account: res.data.account\r\n              })\r\n            }\r\n\r\n            // 提示消息\r\n            this.$message({\r\n              message: '登录成功',\r\n              type: 'success'\r\n            })\r\n\r\n            setTimeout(() => {\r\n              document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'none'\r\n              this.$router.push('/home')\r\n            }, 1000)\r\n          }).catch(err => {\r\n            console.log(err)\r\n          })\r\n        }\r\n        else {\r\n          this.$message({\r\n            message: '用户名和密码不匹配，请重试',\r\n            type: 'error'\r\n          })\r\n          setTimeout(() => {\r\n            document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'none'\r\n            this.pwd = ''\r\n            this.$refs.slideblock.reset()\r\n          }, 500)\r\n\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    onFail(){\r\n      // 验证失败\r\n      this.$message({\r\n        message: '验证失败，请重试',\r\n        type: 'error'\r\n      })\r\n    },\r\n    test() {\r\n      document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'block'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .outer {\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items:center;\r\n  }\r\n\r\n  .outer>div {\r\n    width: 480px;\r\n    background-color: #fff;\r\n    box-shadow: 0 3px 5px rgba(0, 0, 0, .2);\r\n    position: relative;\r\n  }\r\n\r\n  .outer>div>div:first-child {\r\n    font-size: 26px;\r\n    font-family: PingFangSC-Medium;\r\n    font-weight: 500;\r\n    color: rgba(59, 61, 69, 1);\r\n    padding-top: 53px;\r\n    padding-bottom: 58px;\r\n    padding-left: 30px;\r\n  }\r\n\r\n  .outer>div>div:nth-child(2) {\r\n    padding-left: 30px;\r\n    padding-right: 30px;\r\n    padding-bottom: 60px;\r\n  }\r\n\r\n  .outer>div>div:nth-child(3) {\r\n    position: absolute;\r\n    top: 180px;\r\n    left: 85px;\r\n    display: none;\r\n  }\r\n\r\n  input {\r\n    outline: none;\r\n    font-size: 16px;\r\n    padding-left: 12px;\r\n    height: 64px;\r\n    width: 406px;\r\n    border: rgba(226,230,237,1) 1px solid;\r\n    border-radius: 4px;\r\n    margin-bottom: 24px;\r\n  }\r\n  input:focus {\r\n    border: rgba(50, 186, 240, 1) 1px solid;\r\n    transition: .3s;\r\n  }\r\n\r\n  .el-checkbox {\r\n    padding-top: 20px;\r\n    padding-bottom: 20px;\r\n    margin-bottom: 25px;\r\n  }\r\n\r\n  .login-btn {\r\n    height: 50px;\r\n    width: 420px;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    text-align: center;\r\n    line-height: 50px;\r\n    border-radius: 3px;\r\n    background: #32baf0;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n\r\n  .login-btn:hover {\r\n    transition: .2s;\r\n    background: #74b9ff;\r\n  }\r\n\r\n  .register {\r\n    text-align: right;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 15px 0 15px 0;\r\n  }\r\n  .register span:first-child {\r\n    color: #AFB1B3;\r\n  }\r\n  .register span:last-child {\r\n    color: #32BAF0;\r\n  }\r\n</style>"]}]}