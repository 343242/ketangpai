{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Discuss\\Discuss.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Discuss\\Discuss.vue","mtime":1592742808964},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRhc2tDb21taXROYXYgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L1Rhc2tDb21taXROYXYnOwppbXBvcnQgeyByZXF1ZXN0IH0gZnJvbSAnLi4vLi4vbmV0d29yay9yZXF1ZXN0JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEaXNjdXNzJywKICBjb21wb25lbnRzOiB7CiAgICBUYXNrQ29tbWl0TmF2OiBUYXNrQ29tbWl0TmF2CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGV4dGFyZWE6ICIiLAogICAgICB0YXNrOiB7fSwKICAgICAgLy8g6K+E6K66CiAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgY291cnNlOiB7fSwKICAgICAgYXZhdGFyOiByZXF1aXJlKCcuLi8uLi9hc3NldHMvYXZhdGFyLycgKyB0aGlzLiRzdG9yZS5zdGF0ZS5hdmF0YXIpCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGNvbW1lbnRDb25maWcgPSByZXF1ZXN0KHsKICAgICAgdXJsOiAnL2FwaS90YXNrL2dldENvbW1lbnRzJywKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgcGFyYW1zOiB7CiAgICAgICAgdG5vOiB0aGlzLiRyb3V0ZS5wYXJhbXMudG5vCiAgICAgIH0KICAgIH0pOwogICAgdmFyIGNvdXJzZUNvbmZpZyA9IHJlcXVlc3QoewogICAgICB1cmw6ICcvYXBpL2NvdXJzZS9nZXRDb3Vyc2VCeUNubycsCiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHBhcmFtczogewogICAgICAgIGNubzogdGhpcy4kcm91dGUucGFyYW1zLmNubwogICAgICB9CiAgICB9KTsKICAgIHZhciB0YXNrQ29uZmlnID0gcmVxdWVzdCh7CiAgICAgIHVybDogJy9hcGkvdGFza0xpc3QnLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICBjbm86IHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8sCiAgICAgICAgdG5vOiB0aGlzLiRyb3V0ZS5wYXJhbXMudG5vCiAgICAgIH0KICAgIH0pOyAvLyDlj6rmnInkuInkuKror7fmsYLpg73lj5HpgIHlrozmiJDlkI7vvIzmiY3kvJrmnInov5Tlm54KCiAgICBheGlvcy5hbGwoW2NvbW1lbnRDb25maWcsIGNvdXJzZUNvbmZpZywgdGFza0NvbmZpZ10pLnRoZW4oYXhpb3Muc3ByZWFkKGZ1bmN0aW9uIChyZXMxLCByZXMyLCByZXMzKSB7CiAgICAgIF90aGlzLmNvdXJzZSA9IHJlczIuZGF0YTsKICAgICAgX3RoaXMudGFzayA9IHJlczMuZGF0YVswXTsKICAgICAgX3RoaXMuY29tbWVudHMgPSByZXMxLmRhdGE7CiAgICB9KSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhdGVDb21tZW50OiBmdW5jdGlvbiBjcmVhdGVDb21tZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBpdGVtID0gewogICAgICAgIHRhc2s6IHsKICAgICAgICAgIHRubzogdGhpcy4kcm91dGUucGFyYW1zLnRubwogICAgICAgIH0sCiAgICAgICAgdXNlcjogewogICAgICAgICAgdXNlcklkOiB0aGlzLiRzdG9yZS5zdGF0ZS51aWQKICAgICAgICB9LAogICAgICAgIGNvbW1lbnQ6IHRoaXMudGV4dGFyZWEKICAgICAgfTsKICAgICAgcmVxdWVzdCh7CiAgICAgICAgdXJsOiAnL2FwaS90YXNrL2NvbW1lbnQnLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IGl0ZW0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5o+S5YWl5oiQ5Yqf77yM6YeN5paw6K+35rGCCiAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICByZXF1ZXN0KHsKICAgICAgICAgICAgdXJsOiAnL2FwaS90YXNrL2dldENvbW1lbnRzJywKICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgdG5vOiBfdGhpczIuJHJvdXRlLnBhcmFtcy50bm8KICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMi5jb21tZW50cyA9IHJlcy5kYXRhOwogICAgICAgICAgICBfdGhpczIudGV4dGFyZWEgPSAiIjsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGRhdGVfZm9ybWF0OiBmdW5jdGlvbiBkYXRlX2Zvcm1hdChkYXRlKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlKS5mb3JtYXQoInl5L01NL2RkIik7CiAgICB9LAogICAgdGltZV9mb3JtYXQ6IGZ1bmN0aW9uIHRpbWVfZm9ybWF0KGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLmZvcm1hdCgiaGg6bW0iKTsKICAgIH0sCiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUucGVybWlzc2lvbiA9PSAnMicpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3RlYWNoZXJ0YXNrLyIuY29uY2F0KHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3N0dWRlbnR0YXNrLyIuY29uY2F0KHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8pKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Discuss.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"outer\">\n    <task-commit-nav :cname=\"course.name\" @back=\"back\" />\n    <div>\n      <div class=\"content\">\n        <ul>\n          <div slot=\"header\" class=\"clearfix\">\n            <div>\n              <span style=\"float: left\"><h2>作业: {{task.tname}}</h2></span>\n            </div>\n          </div>\n          <div class=\"text item\" style=\" color: #A0A0A0;\">\n            课程: {{course.name}}\n          </div>\n          <el-divider></el-divider>\n          <div class=\"comment-box\">\n          <span>\n            <div><img :src=\"avatar\" /></div>\n          </span>\n            <el-input\n              type=\"textarea\"\n              :rows=\"5\"\n              style=\"position: relative;left: 90px; width:680px;padding-right: 300px\"\n              placeholder=\"添加评论\"\n              v-model=\"textarea\">\n            </el-input>\n            <div style=\"width: 100% ;height: 50px\">\n              <el-button @click=\"createComment()\" :disabled=\"textarea==''\" style=\"float: right;margin-right: 20px;margin-top: 20px\" type=\"primary\">确定</el-button>\n            </div>\n          </div>\n          <el-divider ></el-divider>\n          <li v-for=\"item in comments\">\n            <div>\n              <div><img :src=\"require('../../assets/avatar/' + item.user.avatar)\" /></div>\n              <div class=\"text item\">{{item.user.name}} {{item.user.userId}}<span style=\"color: #a9a9a9;padding-left: 10px\">{{date_format(item.cmDate)}} {{time_format(item.cmDate)}}</span>\n              </div>\n            </div>\n            <div class=\"text item\">{{item.comment}}</div>\n            <el-divider></el-divider>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n  </div>\n\n</template>\n\n<script>\n  import TaskCommitNav from 'components/content/TaskCommitNav'\n  import {request} from '../../network/request'\n  import axios from 'axios'\n\n  export default {\n    name: 'Discuss',\n    components: {\n      TaskCommitNav\n    },\n    data() {\n      return {\n        textarea: \"\",\n        task: {},\n        // 评论\n        comments: [],\n        course: {},\n        avatar:  require('../../assets/avatar/' + this.$store.state.avatar)\n      }\n    },\n    mounted() {\n      const commentConfig = request({\n        url: '/api/task/getComments',\n        method: 'get',\n        params: {\n          tno: this.$route.params.tno\n        }\n      })\n      const courseConfig = request({\n        url: '/api/course/getCourseByCno',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno\n        }\n      })\n      const taskConfig = request({\n        url: '/api/taskList',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno,\n          tno: this.$route.params.tno\n        }\n      })\n\n      // 只有三个请求都发送完成后，才会有返回\n      axios.all([commentConfig, courseConfig, taskConfig])\n        .then(axios.spread((res1, res2, res3) => {\n          this.course = res2.data\n          this.task = res3.data[0]\n          this.comments = res1.data\n        })).catch(err => {console.log(err)})\n    },\n    methods:{\n      createComment(){\n        let item = {\n          task: {tno: this.$route.params.tno},\n          user: {userId: this.$store.state.uid},\n          comment: this.textarea,\n        }\n\n        request({\n          url: '/api/task/comment',\n          method: 'post',\n          data: item\n        }).then(res => {\n          // 插入成功，重新请求\n          if (res.data) {\n            request({\n              url: '/api/task/getComments',\n              method: 'get',\n              params: {\n                tno: this.$route.params.tno\n              }\n            }).then(res => {\n              this.comments = res.data\n              this.textarea=\"\"\n            }).catch(err => {\n              console.log(err)\n            })\n          }\n        }).catch(err => {console.log(err)})\n      },\n      date_format(date) {\n        return new Date(date).format(\"yy/MM/dd\");\n      },\n      time_format(date) {\n        return new Date(date).format(\"hh:mm\");\n      },\n      back() {\n        if (this.$store.state.permission == '2') {\n          this.$router.push(`/teachertask/${this.$route.params.cno}`)\n        } else {\n          this.$router.push(`/studenttask/${this.$route.params.cno}`)\n        }\n\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .outer {\n    width: 100%;\n  }\n\n  .outer>div {\n    width: 95%;\n  }\n\n  .content {\n    padding-top: 100px;\n    width: 810px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .text {\n    font-size: 14px;\n  }\n\n  .item {\n    margin-bottom: 18px;\n    padding-left: 90px;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n\n\n  .clearfix:after {\n    clear: both\n  }\n\n  .clearfix {\n    margin-top: 30px;\n    margin-bottom: 18px;\n    padding: 0 20px 10px 30px;\n  }\n  .comment-box img{\n    width: 37px;\n    height: 37px;\n    position: relative;\n    float: left;\n    top:40px;\n    margin-right: 18px;\n    margin-top: 10px;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  img {\n    width: 37px;\n    height: 37px;\n    position: relative;\n    float: left;\n    margin-left: 38px;\n    margin-top: -5px;\n    border-radius: 50%;\n  }\n\n\n  h2 {\n    padding-top: 10px;\n    float: left;\n    height: 50px;\n    line-height: 50px;\n    font-size: 20px;\n    font-weight: bold;\n    width: 100%;\n  }\n</style>\n"],"sourceRoot":"src/views/Discuss"}]}