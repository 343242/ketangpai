{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Login\\Login.vue","mtime":1592566320000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgdmVyaWZ5MSBmcm9tICdhc3NldHMvaW1nL3ZlcmlmeTEuanBnJw0KaW1wb3J0IHZlcmlmeTIgZnJvbSAnYXNzZXRzL2ltZy92ZXJpZnkyLmpwZWcnDQppbXBvcnQgdmVyaWZ5MyBmcm9tICdhc3NldHMvaW1nL3ZlcmlmeTMuanBnJw0KaW1wb3J0IHZlcmlmeTQgZnJvbSAnYXNzZXRzL2ltZy92ZXJpZnk0LmpwZycNCmltcG9ydCB2ZXJpZnk1IGZyb20gJ2Fzc2V0cy9pbWcvdmVyaWZ5NS5qcGcnDQppbXBvcnQgdmVyaWZ5NiBmcm9tICdhc3NldHMvaW1nL3ZlcmlmeTYuanBnJw0KaW1wb3J0IHZlcmlmeTcgZnJvbSAnYXNzZXRzL2ltZy92ZXJpZnk3LmpwZycNCmltcG9ydCB7cmVxdWVzdH0gZnJvbSAnbmV0d29yay9yZXF1ZXN0Jw0KaW1wb3J0IHtJU19MT0dJTiwgQ0hBTkdFX1VJRCwgVVNFUl9BVkFUQVIsIFBFUk1JU1NJT04sIENIQU5HRV9OQU1FfSBmcm9tICIuLi8uLi9zdG9yZS9tdXRhdGlvbi10eXBlIg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdMb2dpbicsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjY291bnQ6ICcnLA0KICAgICAgcHdkOiAnJywNCiAgICAgIGNoZWNrZWQ6IGZhbHNlLA0KICAgICAgaW1nczogW3ZlcmlmeTEsIHZlcmlmeTIsIHZlcmlmeTMsIHZlcmlmeTQsIHZlcmlmeTUsIHZlcmlmeTYsIHZlcmlmeTddDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVnaXN0ZXIoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3JlZ2lzdGVyIikNCiAgICB9LA0KICAgIG9uU3VjY2Vzcygpew0KICAgICAgLy8g55m75b2V6K+35rGCDQogICAgICByZXF1ZXN0KHsNCiAgICAgICAgdXJsOiAnL2FwaS92ZXJpZnknLA0KICAgICAgICBtZXRob2Q6ICdnZXQnLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wd2QsDQogICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50LA0KICAgICAgICAgIGZ1bmM6ICdsb2dpbicNCiAgICAgICAgfQ0KDQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YSkgew0KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChJU19MT0dJTiwgdGhpcy5hY2NvdW50KQ0KICAgICAgICAgIC8vIOivt+axgueUqOaIt+eahOWujOaVtOS/oeaBr++8jOS/neWtmOWIsOWFqOWxgOS4rS0tPnVpZA0KICAgICAgICAgIHJlcXVlc3Qoew0KICAgICAgICAgICAgdXJsOiAnL2FwaS9maW5kT25lRW50aXR5JywNCiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsDQogICAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KENIQU5HRV9VSUQsIHJlcy5kYXRhLnVzZXJJZCkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChVU0VSX0FWQVRBUiwgcmVzLmRhdGEuYXZhdGFyKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KFBFUk1JU1NJT04sIHJlcy5kYXRhLnBlcm1pc3Npb24ucGlkKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KENIQU5HRV9OQU1FLCByZXMuZGF0YS5uYW1lKQ0KDQogICAgICAgICAgICAvLyDoi6Xngrnkuoboh6rliqjnmbvlvZXvvIzlsIblrZjmlL7kuIDpg6jliIbmlbDmja7liLBjb29raWXkuK0NCiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHsNCiAgICAgICAgICAgICAgdGhpcy4kY29va2llcy5zZXQoJ3VzZXInLCB7DQogICAgICAgICAgICAgICAgdWlkOiByZXMuZGF0YS51c2VySWQsDQogICAgICAgICAgICAgICAgYXZhdGFyOiByZXMuZGF0YS5hdmF0YXIsDQogICAgICAgICAgICAgICAgcGVybWlzc2lvbjogcmVzLmRhdGEucGVybWlzc2lvbi5waWQsDQogICAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEubmFtZSwNCiAgICAgICAgICAgICAgICBhY2NvdW50OiByZXMuZGF0YS5hY2NvdW50DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIOaPkOekuua2iOaBrw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfnmbvlvZXmiJDlip8nLA0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIub3V0ZXI+ZGl2PmRpdjpudGgtY2hpbGQoMykiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnDQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpDQogICAgICAgICAgICB9LCAxMDAwKQ0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnlKjmiLflkI3lkozlr4bnoIHkuI3ljLnphY3vvIzor7fph43or5UnLA0KICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgIH0pDQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIub3V0ZXI+ZGl2PmRpdjpudGgtY2hpbGQoMykiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnDQogICAgICAgICAgICB0aGlzLnB3ZCA9ICcnDQogICAgICAgICAgICB0aGlzLiRyZWZzLnNsaWRlYmxvY2sucmVzZXQoKQ0KICAgICAgICAgIH0sIDUwMCkNCg0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9KQ0KICAgIH0sDQogICAgb25GYWlsKCl7DQogICAgICAvLyDpqozor4HlpLHotKUNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiAn6aqM6K+B5aSx6LSl77yM6K+36YeN6K+VJywNCiAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgfSkNCiAgICB9LA0KICAgIHRlc3QoKSB7DQogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIub3V0ZXI+ZGl2PmRpdjpudGgtY2hpbGQoMykiKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\r\n  <div class=\"outer\">\r\n    <div>\r\n      <div>账号登录</div>\r\n      <div>\r\n        <div><input type=\"text\" placeholder=\"请输入账号\" v-model=\"account\" /></div>\r\n        <div><input type=\"password\" placeholder=\"请输入密码\" v-model=\"pwd\" /></div>\r\n        <div><el-checkbox v-model=\"checked\">下次自动登录</el-checkbox></div>\r\n        <div><div class=\"login-btn\" @click=\"test\">登录</div></div>\r\n        <div class=\"register\"><span @click=\"register\">还没有账号？</span><span @click=\"register\">去注册</span></div>\r\n      </div>\r\n\r\n      <div>\r\n        <slide-verify ref=\"slideblock\" :l=\"42\"\r\n            :r=\"10\"\r\n            :w=\"310\"\r\n            :h=\"155\"\r\n            :imgs=\"imgs\"\r\n            slider-text=\"向右滑动\"\r\n            @success=\"onSuccess\"\r\n            @fail=\"onFail\"\r\n            ></slide-verify>\r\n      </div>\r\n      \r\n    </div>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport verify1 from 'assets/img/verify1.jpg'\r\nimport verify2 from 'assets/img/verify2.jpeg'\r\nimport verify3 from 'assets/img/verify3.jpg'\r\nimport verify4 from 'assets/img/verify4.jpg'\r\nimport verify5 from 'assets/img/verify5.jpg'\r\nimport verify6 from 'assets/img/verify6.jpg'\r\nimport verify7 from 'assets/img/verify7.jpg'\r\nimport {request} from 'network/request'\r\nimport {IS_LOGIN, CHANGE_UID, USER_AVATAR, PERMISSION, CHANGE_NAME} from \"../../store/mutation-type\"\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      account: '',\r\n      pwd: '',\r\n      checked: false,\r\n      imgs: [verify1, verify2, verify3, verify4, verify5, verify6, verify7]\r\n    }\r\n  },\r\n  methods: {\r\n    register() {\r\n      this.$router.push(\"/register\")\r\n    },\r\n    onSuccess(){\r\n      // 登录请求\r\n      request({\r\n        url: '/api/verify',\r\n        method: 'get',\r\n        params: {\r\n          password: this.pwd,\r\n          account: this.account,\r\n          func: 'login'\r\n        }\r\n\r\n      }).then(res => {\r\n        if (res.data) {\r\n          this.$store.commit(IS_LOGIN, this.account)\r\n          // 请求用户的完整信息，保存到全局中-->uid\r\n          request({\r\n            url: '/api/findOneEntity',\r\n            method: 'get',\r\n            params: {\r\n              account: this.account\r\n            }\r\n          }).then(res => {\r\n            this.$store.commit(CHANGE_UID, res.data.userId)\r\n            this.$store.commit(USER_AVATAR, res.data.avatar)\r\n            this.$store.commit(PERMISSION, res.data.permission.pid)\r\n            this.$store.commit(CHANGE_NAME, res.data.name)\r\n\r\n            // 若点了自动登录，将存放一部分数据到cookie中\r\n            if (this.checked) {\r\n              this.$cookies.set('user', {\r\n                uid: res.data.userId,\r\n                avatar: res.data.avatar,\r\n                permission: res.data.permission.pid,\r\n                name: res.data.name,\r\n                account: res.data.account\r\n              })\r\n            }\r\n\r\n            // 提示消息\r\n            this.$message({\r\n              message: '登录成功',\r\n              type: 'success'\r\n            })\r\n\r\n            setTimeout(() => {\r\n              document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'none'\r\n              this.$router.push('/home')\r\n            }, 1000)\r\n          }).catch(err => {\r\n            console.log(err)\r\n          })\r\n        }\r\n        else {\r\n          this.$message({\r\n            message: '用户名和密码不匹配，请重试',\r\n            type: 'error'\r\n          })\r\n          setTimeout(() => {\r\n            document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'none'\r\n            this.pwd = ''\r\n            this.$refs.slideblock.reset()\r\n          }, 500)\r\n\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    onFail(){\r\n      // 验证失败\r\n      this.$message({\r\n        message: '验证失败，请重试',\r\n        type: 'error'\r\n      })\r\n    },\r\n    test() {\r\n      document.querySelector(\".outer>div>div:nth-child(3)\").style.display = 'block'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .outer {\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items:center;\r\n  }\r\n\r\n  .outer>div {\r\n    width: 480px;\r\n    background-color: #fff;\r\n    box-shadow: 0 3px 5px rgba(0, 0, 0, .2);\r\n    position: relative;\r\n  }\r\n\r\n  .outer>div>div:first-child {\r\n    font-size: 26px;\r\n    font-family: PingFangSC-Medium;\r\n    font-weight: 500;\r\n    color: rgba(59, 61, 69, 1);\r\n    padding-top: 53px;\r\n    padding-bottom: 58px;\r\n    padding-left: 30px;\r\n  }\r\n\r\n  .outer>div>div:nth-child(2) {\r\n    padding-left: 30px;\r\n    padding-right: 30px;\r\n    padding-bottom: 60px;\r\n  }\r\n\r\n  .outer>div>div:nth-child(3) {\r\n    position: absolute;\r\n    top: 180px;\r\n    left: 85px;\r\n    display: none;\r\n  }\r\n\r\n  input {\r\n    outline: none;\r\n    font-size: 16px;\r\n    padding-left: 12px;\r\n    height: 64px;\r\n    width: 406px;\r\n    border: rgba(226,230,237,1) 1px solid;\r\n    border-radius: 4px;\r\n    margin-bottom: 24px;\r\n  }\r\n  input:focus {\r\n    border: rgba(50, 186, 240, 1) 1px solid;\r\n    transition: .3s;\r\n  }\r\n\r\n  .el-checkbox {\r\n    padding-top: 20px;\r\n    padding-bottom: 20px;\r\n    margin-bottom: 25px;\r\n  }\r\n\r\n  .login-btn {\r\n    height: 50px;\r\n    width: 420px;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    text-align: center;\r\n    line-height: 50px;\r\n    border-radius: 3px;\r\n    background: #32baf0;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n\r\n  .login-btn:hover {\r\n    transition: .2s;\r\n    background: #74b9ff;\r\n  }\r\n\r\n  .register {\r\n    text-align: right;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 15px 0 15px 0;\r\n  }\r\n  .register span:first-child {\r\n    color: #AFB1B3;\r\n  }\r\n  .register span:last-child {\r\n    color: #32BAF0;\r\n  }\r\n</style>"]}]}