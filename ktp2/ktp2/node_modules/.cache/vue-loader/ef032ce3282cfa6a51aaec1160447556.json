{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\StudentTaskCommit.vue?vue&type=style&index=0&id=7214e5c7&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\StudentTaskCommit.vue","mtime":1592550844000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi53cmFwcGVyIHsKICB3aWR0aDogODMlOwogIG1hcmdpbjogYXV0bzsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC1mYW1pbHk6ICdQaW5nRmFuZyBTQycsdGFob21hLGFyaWFsLCdoZWx2ZXRpY2EgbmV1ZScsJ2hpcmFnaW5vIHNhbnMgZ2InLCdtaWNyb3NvZnQgeWFoZWkgdWknLCdtaWNyb3NvZnQgeWFoZWknLHNpbXN1bixzYW5zLXNlcmlmOwp9Ci50YXNrLWluZm8gewogIHBhZGRpbmctdG9wOiAxMDBweDsKfQouc3VibWl0IHsKICBtYXJnaW4tdG9wOiA0MHB4Owp9Ci50YXNrLXRpdGxlIHsKICBmb250LXNpemU6IDE4cHg7Cn0KLnRhc2std29yZCB7CiAgZm9udC1zaXplOiAxMnB4OwogIG1hcmdpbi10b3A6IDE0cHg7CiAgY29sb3I6ICM1RjYzNjg7Cn0KLnRhc2stcHJvcHMgewogIG1hcmdpbi10b3A6IDMwcHg7Cn0KLnRhc2stcHJvcHMgc3BhbnsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjFGM0Y0OwogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogIzVGNjM2ODsKICBwYWRkaW5nOiAzcHggNXB4OwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoud29yay10ZXh0IHsKICBtYXJnaW4tdG9wOiAyMHB4Owp9Cg=="},{"version":3,"sources":["StudentTaskCommit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StudentTaskCommit.vue","sourceRoot":"src/views/Task","sourcesContent":["<template>\r\n  <div class=\"wrapper\" v-if=\"this.renderKey\">\r\n    <task-commit-nav \r\n      :cname=\"course.name\" \r\n      :tno=\"task.tno\"\r\n      :cno=\"course.cno\"\r\n      @back=\"back\" />\r\n    <div class=\"task-info\">\r\n      <div class=\"task-head\">\r\n        <div class=\"task-title\">\r\n          <span>{{ task.tname }}</span>\r\n        </div>\r\n        <div class=\"task-word\">\r\n          <span v-html=\"task.description\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"task-props\">\r\n        <span>截止日期：{{ date_format(task.endDate) }} {{time_format(task.endDate)}}</span>\r\n        <span>个人作业</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"submit\">\r\n      <el-button style=\"width: 102px;\" type=\"primary\" :disabled=\"isDisabled\" plain @click=\"submit\">{{grade.score == -1 ? '提交' : '更新提交'}}</el-button>\r\n      <span style=\"float: right\">{{ grade.score == -1 ? \"未完成\":\"已提交\" }}</span>\r\n    </div>\r\n    <div class=\"work-text\">\r\n      <span>答：</span>\r\n      <el-input\r\n        style=\"width: 97%;float: right\"\r\n        type=\"textarea\"\r\n        :autosize=\"{ minRows: 5 }\"\r\n        placeholder=\"点击编辑作业内容（仅老师可看）...\"\r\n        @input=\"canDisabled\"\r\n        v-model=\"answer\">\r\n      </el-input>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios'\r\n  import TaskCommitNav from 'components/content/TaskCommitNav'\r\n  import {request} from '../../network/request'\r\n  export default {\r\n    name: \"TaskCommit\",\r\n    components: {\r\n      TaskCommitNav\r\n    },\r\n    data() {\r\n      return {\r\n        course: {},\r\n        task: {},\r\n        grade: {},\r\n        renderKey: false,\r\n        end_date: '',\r\n        answer: '',\r\n        isDisabled: true,\r\n      }\r\n    },\r\n    mounted() {\r\n      const courseConfig = request({\r\n        url: '/api/course/getCourseByCno',\r\n        method: 'get',\r\n        params: {\r\n          cno: this.$route.params.cno\r\n        }\r\n      })\r\n\r\n      const taskConfig = request({\r\n        url: '/api/taskList',\r\n        method: 'get',\r\n        params: {\r\n          tno: this.$route.params.tno,\r\n          cno: this.$route.params.cno\r\n        }\r\n      })\r\n\r\n      const gradeConfig = request({\r\n        url: '/api/grade/getGrade',\r\n        method: 'get',\r\n        params: {\r\n          uid: this.$store.state.uid,\r\n          tno: this.$route.params.tno\r\n        }\r\n      })\r\n\r\n      axios.all([courseConfig, taskConfig, gradeConfig])\r\n      .then(axios.spread((res1, res2, res3) => {\r\n        this.course = res1.data\r\n        this.task = res2.data[0]\r\n        this.grade = res3.data\r\n        this.renderKey = true\r\n        this.answer = this.grade.answer\r\n        this.isDisabled = this.answer == ''\r\n      })).catch(err => {console.log(err)})\r\n    },\r\n    methods: {\r\n      submit() {\r\n        request({\r\n          url: '/api/grade/submit',\r\n          method: 'put',\r\n          params: {\r\n            uid: this.$store.state.uid,\r\n            tno: this.task.tno,\r\n            answer: this.answer\r\n          }\r\n        }).then(res => {\r\n          if (res.data) {\r\n            this.$router.push(`/studenttask/${this.course.cno}`)\r\n            this.$message.success('提交成功')\r\n          } else {\r\n            this.$message.error('提交失败，请重试')\r\n          }\r\n        }).catch(err => {consol.log(err)})\r\n      },\r\n      canDisabled() {\r\n        this.isDisabled = this.answer == ''\r\n      },\r\n      date_format(date) {\r\n      return new Date(date).format(\"yy/MM/dd\");\r\n      },\r\n      time_format(date) {\r\n        return new Date(date).format(\"hh:mm\");\r\n      },\r\n      back() {\r\n        this.$router.push(`/studenttask/${this.course.cno}`)\r\n      }\r\n    },\r\n    \r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .wrapper {\r\n    width: 83%;\r\n    margin: auto;\r\n    font-size: 14px;\r\n    font-family: 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei ui','microsoft yahei',simsun,sans-serif;\r\n  }\r\n  .task-info {\r\n    padding-top: 100px;\r\n  }\r\n  .submit {\r\n    margin-top: 40px;\r\n  }\r\n  .task-title {\r\n    font-size: 18px;\r\n  }\r\n  .task-word {\r\n    font-size: 12px;\r\n    margin-top: 14px;\r\n    color: #5F6368;\r\n  }\r\n  .task-props {\r\n    margin-top: 30px;\r\n  }\r\n  .task-props span{\r\n    background-color: #F1F3F4;\r\n    font-size: 12px;\r\n    color: #5F6368;\r\n    padding: 3px 5px;\r\n    margin-right: 10px;\r\n  }\r\n  .work-text {\r\n    margin-top: 20px;\r\n  }\r\n</style>\r\n"]}]}