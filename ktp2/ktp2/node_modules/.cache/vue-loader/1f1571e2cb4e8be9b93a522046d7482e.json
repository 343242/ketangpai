{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Discuss\\Discuss.vue?vue&type=style&index=0&id=917b7672&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Discuss\\Discuss.vue","mtime":1592742808964},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoub3V0ZXIgewogIHdpZHRoOiAxMDAlOwp9Cgoub3V0ZXI+ZGl2IHsKICB3aWR0aDogOTUlOwp9CgouY29udGVudCB7CiAgcGFkZGluZy10b3A6IDEwMHB4OwogIHdpZHRoOiA4MTBweDsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBtYXJnaW4tcmlnaHQ6IGF1dG87Cn0KCi50ZXh0IHsKICBmb250LXNpemU6IDE0cHg7Cn0KCi5pdGVtIHsKICBtYXJnaW4tYm90dG9tOiAxOHB4OwogIHBhZGRpbmctbGVmdDogOTBweDsKfQoKLmNsZWFyZml4OmJlZm9yZSwKLmNsZWFyZml4OmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBjb250ZW50OiAiIjsKfQoKCi5jbGVhcmZpeDphZnRlciB7CiAgY2xlYXI6IGJvdGgKfQoKLmNsZWFyZml4IHsKICBtYXJnaW4tdG9wOiAzMHB4OwogIG1hcmdpbi1ib3R0b206IDE4cHg7CiAgcGFkZGluZzogMCAyMHB4IDEwcHggMzBweDsKfQouY29tbWVudC1ib3ggaW1newogIHdpZHRoOiAzN3B4OwogIGhlaWdodDogMzdweDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZmxvYXQ6IGxlZnQ7CiAgdG9wOjQwcHg7CiAgbWFyZ2luLXJpZ2h0OiAxOHB4OwogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCmxpIHsKICBsaXN0LXN0eWxlOiBub25lOwp9CgppbWcgewogIHdpZHRoOiAzN3B4OwogIGhlaWdodDogMzdweDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLWxlZnQ6IDM4cHg7CiAgbWFyZ2luLXRvcDogLTVweDsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCgpoMiB7CiAgcGFkZGluZy10b3A6IDEwcHg7CiAgZmxvYXQ6IGxlZnQ7CiAgaGVpZ2h0OiA1MHB4OwogIGxpbmUtaGVpZ2h0OiA1MHB4OwogIGZvbnQtc2l6ZTogMjBweDsKICBmb250LXdlaWdodDogYm9sZDsKICB3aWR0aDogMTAwJTsKfQo="},{"version":3,"sources":["Discuss.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Discuss.vue","sourceRoot":"src/views/Discuss","sourcesContent":["<template>\n  <div class=\"outer\">\n    <task-commit-nav :cname=\"course.name\" @back=\"back\" />\n    <div>\n      <div class=\"content\">\n        <ul>\n          <div slot=\"header\" class=\"clearfix\">\n            <div>\n              <span style=\"float: left\"><h2>作业: {{task.tname}}</h2></span>\n            </div>\n          </div>\n          <div class=\"text item\" style=\" color: #A0A0A0;\">\n            课程: {{course.name}}\n          </div>\n          <el-divider></el-divider>\n          <div class=\"comment-box\">\n          <span>\n            <div><img :src=\"avatar\" /></div>\n          </span>\n            <el-input\n              type=\"textarea\"\n              :rows=\"5\"\n              style=\"position: relative;left: 90px; width:680px;padding-right: 300px\"\n              placeholder=\"添加评论\"\n              v-model=\"textarea\">\n            </el-input>\n            <div style=\"width: 100% ;height: 50px\">\n              <el-button @click=\"createComment()\" :disabled=\"textarea==''\" style=\"float: right;margin-right: 20px;margin-top: 20px\" type=\"primary\">确定</el-button>\n            </div>\n          </div>\n          <el-divider ></el-divider>\n          <li v-for=\"item in comments\">\n            <div>\n              <div><img :src=\"require('../../assets/avatar/' + item.user.avatar)\" /></div>\n              <div class=\"text item\">{{item.user.name}} {{item.user.userId}}<span style=\"color: #a9a9a9;padding-left: 10px\">{{date_format(item.cmDate)}} {{time_format(item.cmDate)}}</span>\n              </div>\n            </div>\n            <div class=\"text item\">{{item.comment}}</div>\n            <el-divider></el-divider>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n  </div>\n\n</template>\n\n<script>\n  import TaskCommitNav from 'components/content/TaskCommitNav'\n  import {request} from '../../network/request'\n  import axios from 'axios'\n\n  export default {\n    name: 'Discuss',\n    components: {\n      TaskCommitNav\n    },\n    data() {\n      return {\n        textarea: \"\",\n        task: {},\n        // 评论\n        comments: [],\n        course: {},\n        avatar:  require('../../assets/avatar/' + this.$store.state.avatar)\n      }\n    },\n    mounted() {\n      const commentConfig = request({\n        url: '/api/task/getComments',\n        method: 'get',\n        params: {\n          tno: this.$route.params.tno\n        }\n      })\n      const courseConfig = request({\n        url: '/api/course/getCourseByCno',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno\n        }\n      })\n      const taskConfig = request({\n        url: '/api/taskList',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno,\n          tno: this.$route.params.tno\n        }\n      })\n\n      // 只有三个请求都发送完成后，才会有返回\n      axios.all([commentConfig, courseConfig, taskConfig])\n        .then(axios.spread((res1, res2, res3) => {\n          this.course = res2.data\n          this.task = res3.data[0]\n          this.comments = res1.data\n        })).catch(err => {console.log(err)})\n    },\n    methods:{\n      createComment(){\n        let item = {\n          task: {tno: this.$route.params.tno},\n          user: {userId: this.$store.state.uid},\n          comment: this.textarea,\n        }\n\n        request({\n          url: '/api/task/comment',\n          method: 'post',\n          data: item\n        }).then(res => {\n          // 插入成功，重新请求\n          if (res.data) {\n            request({\n              url: '/api/task/getComments',\n              method: 'get',\n              params: {\n                tno: this.$route.params.tno\n              }\n            }).then(res => {\n              this.comments = res.data\n              this.textarea=\"\"\n            }).catch(err => {\n              console.log(err)\n            })\n          }\n        }).catch(err => {console.log(err)})\n      },\n      date_format(date) {\n        return new Date(date).format(\"yy/MM/dd\");\n      },\n      time_format(date) {\n        return new Date(date).format(\"hh:mm\");\n      },\n      back() {\n        if (this.$store.state.permission == '2') {\n          this.$router.push(`/teachertask/${this.$route.params.cno}`)\n        } else {\n          this.$router.push(`/studenttask/${this.$route.params.cno}`)\n        }\n\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .outer {\n    width: 100%;\n  }\n\n  .outer>div {\n    width: 95%;\n  }\n\n  .content {\n    padding-top: 100px;\n    width: 810px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .text {\n    font-size: 14px;\n  }\n\n  .item {\n    margin-bottom: 18px;\n    padding-left: 90px;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n\n\n  .clearfix:after {\n    clear: both\n  }\n\n  .clearfix {\n    margin-top: 30px;\n    margin-bottom: 18px;\n    padding: 0 20px 10px 30px;\n  }\n  .comment-box img{\n    width: 37px;\n    height: 37px;\n    position: relative;\n    float: left;\n    top:40px;\n    margin-right: 18px;\n    margin-top: 10px;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  img {\n    width: 37px;\n    height: 37px;\n    position: relative;\n    float: left;\n    margin-left: 38px;\n    margin-top: -5px;\n    border-radius: 50%;\n  }\n\n\n  h2 {\n    padding-top: 10px;\n    float: left;\n    height: 50px;\n    line-height: 50px;\n    font-size: 20px;\n    font-weight: bold;\n    width: 100%;\n  }\n</style>\n"]}]}