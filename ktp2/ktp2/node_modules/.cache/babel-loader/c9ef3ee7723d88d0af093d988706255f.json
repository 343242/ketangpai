{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\StudentTaskCommit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\StudentTaskCommit.vue","mtime":1592550844000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFRhc2tDb21taXROYXYgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L1Rhc2tDb21taXROYXYnOwppbXBvcnQgeyByZXF1ZXN0IH0gZnJvbSAnLi4vLi4vbmV0d29yay9yZXF1ZXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYXNrQ29tbWl0IiwKICBjb21wb25lbnRzOiB7CiAgICBUYXNrQ29tbWl0TmF2OiBUYXNrQ29tbWl0TmF2CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY291cnNlOiB7fSwKICAgICAgdGFzazoge30sCiAgICAgIGdyYWRlOiB7fSwKICAgICAgcmVuZGVyS2V5OiBmYWxzZSwKICAgICAgZW5kX2RhdGU6ICcnLAogICAgICBhbnN3ZXI6ICcnLAogICAgICBpc0Rpc2FibGVkOiB0cnVlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGNvdXJzZUNvbmZpZyA9IHJlcXVlc3QoewogICAgICB1cmw6ICcvYXBpL2NvdXJzZS9nZXRDb3Vyc2VCeUNubycsCiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHBhcmFtczogewogICAgICAgIGNubzogdGhpcy4kcm91dGUucGFyYW1zLmNubwogICAgICB9CiAgICB9KTsKICAgIHZhciB0YXNrQ29uZmlnID0gcmVxdWVzdCh7CiAgICAgIHVybDogJy9hcGkvdGFza0xpc3QnLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICB0bm86IHRoaXMuJHJvdXRlLnBhcmFtcy50bm8sCiAgICAgICAgY25vOiB0aGlzLiRyb3V0ZS5wYXJhbXMuY25vCiAgICAgIH0KICAgIH0pOwogICAgdmFyIGdyYWRlQ29uZmlnID0gcmVxdWVzdCh7CiAgICAgIHVybDogJy9hcGkvZ3JhZGUvZ2V0R3JhZGUnLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICB1aWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVpZCwKICAgICAgICB0bm86IHRoaXMuJHJvdXRlLnBhcmFtcy50bm8KICAgICAgfQogICAgfSk7CiAgICBheGlvcy5hbGwoW2NvdXJzZUNvbmZpZywgdGFza0NvbmZpZywgZ3JhZGVDb25maWddKS50aGVuKGF4aW9zLnNwcmVhZChmdW5jdGlvbiAocmVzMSwgcmVzMiwgcmVzMykgewogICAgICBfdGhpcy5jb3Vyc2UgPSByZXMxLmRhdGE7CiAgICAgIF90aGlzLnRhc2sgPSByZXMyLmRhdGFbMF07CiAgICAgIF90aGlzLmdyYWRlID0gcmVzMy5kYXRhOwogICAgICBfdGhpcy5yZW5kZXJLZXkgPSB0cnVlOwogICAgICBfdGhpcy5hbnN3ZXIgPSBfdGhpcy5ncmFkZS5hbnN3ZXI7CiAgICAgIF90aGlzLmlzRGlzYWJsZWQgPSBfdGhpcy5hbnN3ZXIgPT0gJyc7CiAgICB9KSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmw6ICcvYXBpL2dyYWRlL3N1Ym1pdCcsCiAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHVpZDogdGhpcy4kc3RvcmUuc3RhdGUudWlkLAogICAgICAgICAgdG5vOiB0aGlzLnRhc2sudG5vLAogICAgICAgICAgYW5zd2VyOiB0aGlzLmFuc3dlcgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCIvc3R1ZGVudHRhc2svIi5jb25jYXQoX3RoaXMyLmNvdXJzZS5jbm8pKTsKCiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5o+Q5Lqk5oiQ5YqfJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcign5o+Q5Lqk5aSx6LSl77yM6K+36YeN6K+VJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5EaXNhYmxlZDogZnVuY3Rpb24gY2FuRGlzYWJsZWQoKSB7CiAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IHRoaXMuYW5zd2VyID09ICcnOwogICAgfSwKICAgIGRhdGVfZm9ybWF0OiBmdW5jdGlvbiBkYXRlX2Zvcm1hdChkYXRlKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlKS5mb3JtYXQoInl5L01NL2RkIik7CiAgICB9LAogICAgdGltZV9mb3JtYXQ6IGZ1bmN0aW9uIHRpbWVfZm9ybWF0KGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLmZvcm1hdCgiaGg6bW0iKTsKICAgIH0sCiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3N0dWRlbnR0YXNrLyIuY29uY2F0KHRoaXMuY291cnNlLmNubykpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["StudentTaskCommit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"wrapper\" v-if=\"this.renderKey\">\r\n    <task-commit-nav \r\n      :cname=\"course.name\" \r\n      :tno=\"task.tno\"\r\n      :cno=\"course.cno\"\r\n      @back=\"back\" />\r\n    <div class=\"task-info\">\r\n      <div class=\"task-head\">\r\n        <div class=\"task-title\">\r\n          <span>{{ task.tname }}</span>\r\n        </div>\r\n        <div class=\"task-word\">\r\n          <span v-html=\"task.description\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"task-props\">\r\n        <span>截止日期：{{ date_format(task.endDate) }} {{time_format(task.endDate)}}</span>\r\n        <span>个人作业</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"submit\">\r\n      <el-button style=\"width: 102px;\" type=\"primary\" :disabled=\"isDisabled\" plain @click=\"submit\">{{grade.score == -1 ? '提交' : '更新提交'}}</el-button>\r\n      <span style=\"float: right\">{{ grade.score == -1 ? \"未完成\":\"已提交\" }}</span>\r\n    </div>\r\n    <div class=\"work-text\">\r\n      <span>答：</span>\r\n      <el-input\r\n        style=\"width: 97%;float: right\"\r\n        type=\"textarea\"\r\n        :autosize=\"{ minRows: 5 }\"\r\n        placeholder=\"点击编辑作业内容（仅老师可看）...\"\r\n        @input=\"canDisabled\"\r\n        v-model=\"answer\">\r\n      </el-input>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios'\r\n  import TaskCommitNav from 'components/content/TaskCommitNav'\r\n  import {request} from '../../network/request'\r\n  export default {\r\n    name: \"TaskCommit\",\r\n    components: {\r\n      TaskCommitNav\r\n    },\r\n    data() {\r\n      return {\r\n        course: {},\r\n        task: {},\r\n        grade: {},\r\n        renderKey: false,\r\n        end_date: '',\r\n        answer: '',\r\n        isDisabled: true,\r\n      }\r\n    },\r\n    mounted() {\r\n      const courseConfig = request({\r\n        url: '/api/course/getCourseByCno',\r\n        method: 'get',\r\n        params: {\r\n          cno: this.$route.params.cno\r\n        }\r\n      })\r\n\r\n      const taskConfig = request({\r\n        url: '/api/taskList',\r\n        method: 'get',\r\n        params: {\r\n          tno: this.$route.params.tno,\r\n          cno: this.$route.params.cno\r\n        }\r\n      })\r\n\r\n      const gradeConfig = request({\r\n        url: '/api/grade/getGrade',\r\n        method: 'get',\r\n        params: {\r\n          uid: this.$store.state.uid,\r\n          tno: this.$route.params.tno\r\n        }\r\n      })\r\n\r\n      axios.all([courseConfig, taskConfig, gradeConfig])\r\n      .then(axios.spread((res1, res2, res3) => {\r\n        this.course = res1.data\r\n        this.task = res2.data[0]\r\n        this.grade = res3.data\r\n        this.renderKey = true\r\n        this.answer = this.grade.answer\r\n        this.isDisabled = this.answer == ''\r\n      })).catch(err => {console.log(err)})\r\n    },\r\n    methods: {\r\n      submit() {\r\n        request({\r\n          url: '/api/grade/submit',\r\n          method: 'put',\r\n          params: {\r\n            uid: this.$store.state.uid,\r\n            tno: this.task.tno,\r\n            answer: this.answer\r\n          }\r\n        }).then(res => {\r\n          if (res.data) {\r\n            this.$router.push(`/studenttask/${this.course.cno}`)\r\n            this.$message.success('提交成功')\r\n          } else {\r\n            this.$message.error('提交失败，请重试')\r\n          }\r\n        }).catch(err => {consol.log(err)})\r\n      },\r\n      canDisabled() {\r\n        this.isDisabled = this.answer == ''\r\n      },\r\n      date_format(date) {\r\n      return new Date(date).format(\"yy/MM/dd\");\r\n      },\r\n      time_format(date) {\r\n        return new Date(date).format(\"hh:mm\");\r\n      },\r\n      back() {\r\n        this.$router.push(`/studenttask/${this.course.cno}`)\r\n      }\r\n    },\r\n    \r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .wrapper {\r\n    width: 83%;\r\n    margin: auto;\r\n    font-size: 14px;\r\n    font-family: 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei ui','microsoft yahei',simsun,sans-serif;\r\n  }\r\n  .task-info {\r\n    padding-top: 100px;\r\n  }\r\n  .submit {\r\n    margin-top: 40px;\r\n  }\r\n  .task-title {\r\n    font-size: 18px;\r\n  }\r\n  .task-word {\r\n    font-size: 12px;\r\n    margin-top: 14px;\r\n    color: #5F6368;\r\n  }\r\n  .task-props {\r\n    margin-top: 30px;\r\n  }\r\n  .task-props span{\r\n    background-color: #F1F3F4;\r\n    font-size: 12px;\r\n    color: #5F6368;\r\n    padding: 3px 5px;\r\n    margin-right: 10px;\r\n  }\r\n  .work-text {\r\n    margin-top: 20px;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/Task"}]}