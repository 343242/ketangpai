{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\components\\content\\PersonalDeliver.vue?vue&type=style&index=0&id=5214e3af&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\components\\content\\PersonalDeliver.vue","mtime":1592635432000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5wZXJzb25hbC1kZWxpdmVyIHsKICBib3JkZXI6IDFweCBzb2xpZCAjRTJFNkVEOwogIG1hcmdpbi10b3A6IDIwcHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGJhY2tncm91bmQ6ICNmZmY7CiAgcGFkZGluZzogMjBweCAyMHB4IDYwcHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQouYW5uZXgtYnV0dG9uIHsKICBmbG9hdDogbGVmdDsKfQouZWRpdG9yLCAuZm9ybS1saW5lLCAuYW5uZXgtdXBsb2FkIHsKICBtYXJnaW4tdG9wOiAyMHB4Owp9Ci5lZGl0b3IgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB6LWluZGV4OiA0MDsKfQouZm9ybS1zcGFuIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDcwcHg7CiAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgbWFyZ2luLXJpZ2h0OiAxNXB4Owp9Cg=="},{"version":3,"sources":["PersonalDeliver.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PersonalDeliver.vue","sourceRoot":"src/components/content","sourcesContent":["<template>\n  <div class=\"personal-deliver\">\n    <form id=\"personal_form\">\n      <el-input v-model=\"tname\" placeholder=\"作业名称\"></el-input>\n      <Editor class=\"editor\" :description=\"description\" @description=\"upDescription\"/>\n      <el-upload\n        class=\"annex-upload\"\n        multiple\n        action=\"/api/annex/upload\"\n        :file-list=\"annex\"\n        :on-success=\"annexUploadSuccess\"\n        :on-error=\"annexUploadError\"\n        :before-remove=\"annexBeforeDelete\">\n        <el-button type=\"primary\" class=\"annex-button\"><i class=\"el-icon-paperclip el-icon--left\"/>上传附件</el-button>\n      </el-upload>\n      <div class=\"form-line\">\n        <span class=\"form-span\">截止日期：</span>\n        <el-date-picker\n          v-model=\"endDate\"\n          type=\"date\"\n          placeholder=\"选择日期\"\n          value-format=\"yyyy-MM-dd\"\n          :clearable=\"false\">\n        </el-date-picker>\n        <el-time-select v-model=\"end_time\" :picker-options=\"{\n              start: '00:00',\n              step: '00:15',\n              end: '23:45'\n            }\" placeholder=\"选择时间\" v-if=\"endDate !== ''\" style=\"margin-left: 20px;\">\n        </el-time-select>\n        <el-switch\n          v-model=\"outdate\"\n          v-if=\"endDate !== ''\"\n          active-text=\"若超时，禁止提交\"\n          style=\"margin-left: 50px\">\n        </el-switch>\n      </div>\n      <div class=\"form-line\">\n        <span class=\"form-span\">满分值：</span>\n        <el-input v-model=\"max_point\" style=\"width: 60px\"></el-input>\n      </div>\n      <div class=\"form-line\">\n        <span class=\"form-span\" style=\"line-height: 40px;height: 40px\">是否查重：</span>\n        <el-switch\n          v-model=\"check_dump\">\n        </el-switch>\n        <span v-if=\"check_dump === true\">\n          <span style=\"margin-left: 20px;color: #a0a0a0\">查重禁戒值：</span>\n          <el-input v-model=\"alarm_line\" style=\"width: 60px;margin-left: 10px;\"></el-input>\n          <span style=\"text-align: right;width: 20px;display: inline-block\">%</span>\n        </span>\n        <div style=\"margin-top: 15px;\" v-if=\"check_dump === true\">\n          <span class=\"form-span\"></span>\n          <el-checkbox v-model=\"auto_alarm\"></el-checkbox>\n          <span v-if=\"check_dump === true\">\n            <span style=\"margin-left: 20px;color: #a0a0a0\">查重率高于</span>\n            <el-input v-model=\"alarm_line\" style=\"width: 60px;margin-left: 10px;\"></el-input>\n            <span style=\"text-align: right;width: 80px;display: inline-block\">%自动打回</span>\n          </span>\n        </div>\n      </div>\n      <div class=\"form-line\">\n        <el-button type=\"primary\" style=\"float: left\"><i class=\"el-icon-download el-icon--left\"/>导入作业</el-button>\n        <span style=\"float: right;display: flex;justify-content: space-between\">\n          <el-button type=\"primary\" @click=\"cancel\" style=\"float: left\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submit\" style=\"float: left\">{{ edit ? \"保存\":\"发布个人作业\" }}</el-button>\n        </span>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import Editor from \"@/components/content/Editor\";\n\n    export default {\n      name: \"PersonalDeliver\",\n      components: {Editor},\n      props: {\n        edit: {\n          type:Boolean,\n          default:false\n        },\n        task: {\n          type:Object\n        },\n        cno: {\n          type: String\n        }\n      },\n      data() {\n        return {\n          tname: '',\n          description: this.task === undefined ? '':this.task.description,\n          endDate: '',\n          end_time: '',\n          annex: [],\n          annex_map: [],\n          outdate: false,\n          max_point: '',\n          check_dump: false,\n          alarm_line: '',\n          auto_alarm: false,\n        }\n      },\n      mounted() {\n        if (this.edit) {\n          this.putUp()\n        }\n      },\n      methods: {\n        cancel() {\n          this.$emit('deliver',0)\n        },\n        submit() {\n          const data = {\n            tno: this.task === undefined ? '' : this.task.tno,\n            tname: this.tname,\n            description: this.description,\n            annex: this.form_annex(),\n            avgScore: this.task === undefined ? 0:this.task.avgScore,\n            passRate: this.task === undefined ? 0:this.task.passRate,\n            highestScore: this.task === undefined ? 0:this.task.highestScore,\n            lowestScore: this.task === undefined ? 0:this.task.lowestScore,\n            createDate: new Date().format('yyyy-MM-ddThh:mm:ss+0800'),\n            endDate: (this.endDate + 'T' + this.end_time + ':00+0800'),\n            submitNum: this.task === undefined ? 0:this.task.submitNum,\n            judgeNum: this.task === undefined ? 0:this.task.judgeNum,\n            cno: this.task === undefined ? this.cno:this.task.cno,\n          }\n\n          axios.post(this.edit ? '/api/updateTask':'/api/insertTask', data).then(res => {\n            console.log('-------------')\n            this.annex_map = []\n            this.$emit('send')\n            this.$emit('deliver')\n          })\n\n        },\n        putUp() {\n          this.tname = this.task.tname\n          this.endDate = new Date(this.task.endDate).format('yyyy-MM-dd')\n          this.end_time = new Date(this.task.endDate).format('hh:mm')\n          this.annex = this.annex_format(this.task.annex)\n        },\n        upDescription(description) {\n          this.description = description\n          console.log(description)\n        },\n        annex_format(annex) {\n          if (annex === null) {\n            return []\n          }\n          var temp = annex.split('?')\n          var annex_temp = []\n          temp.forEach(item => {\n            annex_temp.push({\n              oriName: item,\n              name: item.substring(10),\n            })\n          })\n          return annex_temp\n        },\n        annexUploadSuccess(res) {\n          this.annex.push({\n            oriName: res,\n            name: res.substring(10)\n          })\n          this.$message.success(\"附件上传成功\")\n        },\n        annexUploadError(res) {\n          this.$message.error(\"附件上传失败\")\n        },\n        annexBeforeDelete(file) {\n          this.annex.forEach((item, index) => {\n            if (item.name === file.name) {\n              this.annex.slice(index, 1)\n            }\n          })\n        },\n        form_annex() {\n          var annex_temp = ''\n          if (this.annex !== []) {\n            this.annex.forEach(item => {\n              annex_temp = annex_temp.concat(item.oriName + '?')\n            })\n            annex_temp = annex_temp.substring(0, annex_temp.length - 1)\n          } else {\n            return null\n          }\n          return annex_temp\n        }\n      }\n      \n    }\n</script>\n\n<style scoped>\n  .personal-deliver {\n    border: 1px solid #E2E6ED;\n    margin-top: 20px;\n    border-radius: 8px;\n    background: #fff;\n    padding: 20px 20px 60px;\n    text-align: left;\n  }\n  .annex-button {\n    float: left;\n  }\n  .editor, .form-line, .annex-upload {\n    margin-top: 20px;\n  }\n  .editor {\n    position: relative;\n    z-index: 40;\n  }\n  .form-span {\n    display: inline-block;\n    width: 70px;\n    text-align: right;\n    margin-right: 15px;\n  }\n</style>\n"]}]}