{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Home\\Home.vue?vue&type=style&index=0&id=6d720fe5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Home\\Home.vue","mtime":1592624078000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5vdXRlciB7CiAgaGVpZ2h0OiAxMDAlOwp9CgouY291cnNlLW5hdiB7CiAgcGFkZGluZy10b3A6IDEwMHB4OwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouY291cnNlLW5hdj5kaXYgewogIHdpZHRoOiA5MCU7CiAgbWFyZ2luOiAwIGF1dG87CiAgaGVpZ2h0OiA0MHB4OwogIGxpbmUtaGVpZ2h0OiA0MHB4OwogIHBhZGRpbmctYm90dG9tOiAxMnB4OwogIGJveC1zaGFkb3c6IDAgMXB4IDAgMCByZ2JhKDIyNiwyMzAsMjM3LDEpOwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KLmNvdXJzZS1uYXY+ZGl2PmRpdjpmaXJzdC1jaGlsZCB7CiAgZmxvYXQ6IHJpZ2h0OwogIGhlaWdodDogMjZweDsKICBsaW5lLWhlaWdodDogMjZweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGJhY2tncm91bmQ6IHJnYmEoNTAsMTg2LDI0MCwxKTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxNHB4OwogIGNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDEpOwogIHBhZGRpbmc6IDVweCAxNXB4Owp9Ci5jb3Vyc2UtbmF2PmRpdj5kaXY6bnRoLWNoaWxkKDIpIHsKICBmbG9hdDogcmlnaHQ7CiAgaGVpZ2h0OiAyNnB4OwogIGxpbmUtaGVpZ2h0OiAyNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgYmFja2dyb3VuZDogcmdiYSg1MCwxODYsMjQwLDEpOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMSk7CiAgcGFkZGluZzogNXB4IDE1cHg7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9Ci5jb3Vyc2UtbmF2PmRpdj5kaXY6bnRoLWNoaWxkKDMpIHsKICBmbG9hdDogcmlnaHQ7CiAgaGVpZ2h0OiAyNnB4OwogIGxpbmUtaGVpZ2h0OiAyNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgYmFja2dyb3VuZDogcmdiYSg1MCwxODYsMjQwLDEpOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMSk7CiAgcGFkZGluZzogNXB4IDE1cHg7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgouY29udGVudCB7CiAgd2lkdGg6IDkwJTsgCiAgbWFyZ2luOiAwIGF1dG87Cn0KCi5hcmNoaXZlUGFnZSB7CiAgbWF4LWhlaWdodDogMzAwcHg7CiAgb3ZlcmZsb3cteTogc2Nyb2xsOwogIG92ZXJmbG93LXg6IGhpZGRlbjsKfQovKiDmu5Hliqjmp70gKi8KLmFyY2hpdmVQYWdlOjotd2Via2l0LXNjcm9sbGJhciB7CiAgd2lkdGg6IDZweDsKICBoZWlnaHQ6IDZweDsKfQovKiDmu5Hliqjmp73og4zmma8gKi8KLmFyY2hpdmVQYWdlOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjYpOwp9Ci8qIOa7muWKqOadoSAqLwouYXJjaGl2ZVBhZ2U6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgYmFja2dyb3VuZDogcmdiYSgxMjYsIDIxNCwgMjIzLCAuNik7CiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDVweCByZ2JhKDAsIDAsIDAsIDAuMDgpOwp9CgouYXJjaGl2ZVBhZ2U+ZGl2PmRpdjpmaXJzdC1jaGlsZCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGNvbG9yOiAjZmZmOwp9Ci5hcmNoaXZlUGFnZT5kaXYgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYmFja2dyb3VuZDogI2ZlY2E1NzsKICBoZWlnaHQ6IDcycHg7CiAgcGFkZGluZzogMjRweCAxNnB4IDE0cHggMTZweDsKfQouYXJjaGl2ZVBhZ2U+ZGl2PmRpdjpmaXJzdC1jaGlsZD5kaXY6Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgbWFyZ2luLXRvcDogNXB4Owp9Ci5hcmNoaXZlUGFnZT5kaXY6bm90KDpsYXN0LWNoaWxkKSB7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQouYXJjaGl2ZVBhZ2U+ZGl2PmRpdjpsYXN0LWNoaWxkPnNwYW4gewogIG1hcmdpbi1yaWdodDogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgY29sb3I6ICNmZjZiNmI7CiAgbGluZS1oZWlnaHQ6IDcycHg7Cn0KLmlucHV0LWNubyB7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQouaW5wdXQtY25vfmRpdiB7CiAgd2lkdGg6IDgwJTsKICBtYXJnaW46IDAgYXV0bzsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwp9CgouY3JlYXRlPmRpdjpmaXJzdC1jaGlsZD5pbnB1dCB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgaGVpZ2h0OiAzOHB4OwogIHdpZHRoOiAyNjBweDsKICBmb250LXNpemU6IDE0cHg7CiAgb3V0bGluZTogMDsKICBib3JkZXI6IG5vbmU7CiAgYmFja2dyb3VuZDogMCAwOwogIGN1cnNvcjogdGV4dDsKICBtYXJnaW4tbGVmdDogMTBweDsKfQouY3JlYXRlPmRpdjpudGgtY2hpbGQoMik+LmVsLXNlbGVjdCB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9Ci5jcmVhdGU+ZGl2Om50aC1jaGlsZCgzKSB7CiAgbWFyZ2luLXRvcDogMjBweDsKICBtYXJnaW4tcmlnaHQ6IDQwcHg7CiAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCi5jb250ZW50PmRpdiB7CiAgZmxvYXQ6IGxlZnQ7CiAgd2lkdGg6IDMwMHB4OwogIHBhZGRpbmctYm90dG9tOiAzMHB4Owp9Ci5jb250ZW50PmRpdjphZnRlciB7CiAgY29udGVudDogJyc7CiAgY2xlYXI6IGJvdGg7Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkdA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\r\n  <div class=\"outer\">\r\n    <home-nav \r\n      @clear-style=\"clearStyle\"/>\r\n    <!-- 首页分导航部分 -->\r\n    <div class=\"course-nav\">\r\n      <div>\r\n        <div @click=\"addCourseDialog = true\"><span>+ 加入课程</span></div>\r\n        <div @click=\"archiveDialog = true\"><span>归档管理</span></div>\r\n        <div v-if=\"permission == '2'\" @click=\"cc('创建课程')\"><span>+ 创建课程</span></div>\r\n      </div>\r\n      \r\n    </div>\r\n    <!-- 卡片部分 -->\r\n    <div class=\"content\">\r\n      <div v-for=\"(course, index) in courses\" \r\n          :key=\"course.cno\">\r\n        <home-card \r\n          :ref=\"'c' + course.cno\"\r\n          :course=\"course\" \r\n          :index=\"index\"\r\n          @edit-course=\"editCourse\"\r\n          @delete-course=\"deleteCourse\"\r\n          @archive-course=\"archiveCourse\"\r\n          @drop-out=\"dropOut\"\r\n          @goto-task=\"gotoTask\" />\r\n      </div>\r\n      \r\n    </div>\r\n\r\n    <!-- 弹框 -->\r\n    <!-- 归档 -->\r\n    <el-dialog title=\"归档管理\" :visible.sync=\"archiveDialog\">\r\n      <div class=\"archivePage\">\r\n        <div v-for=\"item in archiveCourses\" :key=\"item.cno\">\r\n          <div>\r\n            <div style=\"font-size: 20px\">{{item.name}}</div>\r\n            <div style=\"font-size: 12px\">角色: {{showPermission}}</div>\r\n          </div>\r\n          <div>\r\n            <span @click=\"recover(item)\">恢复</span>\r\n            <span @click=\"deleteCourse(item, true)\" v-if=\"permission === '2'\">删除</span>\r\n            <span @click=\"dropOut(item, true)\" v-else>退课</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 创建/加入 -->\r\n    <el-dialog title=\"加入课程\" :visible.sync=\"addCourseDialog\" :width=\"'250px'\">\r\n      <el-input v-model=\"cno\" placeholder=\"请输入课程号\" class=\"input-cno\" @input=\"changeAddDisable\"></el-input>\r\n      <div>\r\n        <div><el-button round @click=\"cancel\">取消</el-button></div>\r\n        <div><el-button type=\"primary\" round :disabled=\"inputNotNull\" @click=\"addToACourse\">加入</el-button></div>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog :title=\"course_select\" :visible.sync=\"createCourseDialog\">\r\n      <div class=\"create\">\r\n        <div>\r\n          <span>课程名称: </span><input v-model=\"course.cname\" @input=\"changeCreateDisable\" type=\"text\" placeholder=\"请输入课程名称\" />\r\n        </div>\r\n        <div>\r\n          <span>选择学期: </span>\r\n          <el-select @change=\"changeCreateDisable\" v-model=\"course.year\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in years\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-select @change=\"changeCreateDisable\" v-model=\"course.semester\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in semesters\"\r\n              :key=\"item.id\"\r\n              :label=\"item.label\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </div>\r\n        <div>\r\n          <el-button plain @click=\"cancel\">取消</el-button>\r\n          <el-button type=\"primary\" plain :disabled=\"createNotNull\" @click=\"addCourse\">确定</el-button>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import HomeNav from 'components/content/HomeNav'\r\n  import HomeCard from 'views/Home/HomeCard'\r\n  import {request} from '../../network/request'\r\n  import axios from 'axios'\r\n\r\n  export default {\r\n    name: 'Home',\r\n    data() {\r\n      return {\r\n        courses: [],\r\n        permission: '',\r\n        archiveDialog: false,\r\n        addCourseDialog: false,\r\n        createCourseDialog: false,\r\n        cno: '',\r\n        inputNotNull: true,\r\n        createNotNull: true,\r\n        years: ['2018-2019', '2019-2020', '2020-2021'],\r\n        semesters: [{id: '1', label: '第一学期'}, {id: '2', label: '第二学期'}],\r\n        course: {\r\n          year: '',\r\n          cnmae: '',\r\n          semester: '',\r\n          members: 0,\r\n          admin: {userId: this.$store.state.uid, name: this.$store.state.name}\r\n        },\r\n        course_select: '',\r\n        // 归档数组\r\n        archiveCourses: [],\r\n      }\r\n    },\r\n    computed: {\r\n      showPermission() {\r\n        return this.$store.permission === 1 ? '学生' : '教师'\r\n      }\r\n    },\r\n    components: {\r\n      HomeNav,\r\n      HomeCard\r\n    },\r\n    mounted() {\r\n      this.permission = this.$store.state.permission\r\n      this.getCourses()\r\n    },\r\n    methods: {\r\n      getCourses() {\r\n        // 教师端和学生端请求课程\r\n        const stCourse = request({\r\n          url: '/api/course/getCourse',\r\n          method: 'get',\r\n          params: {\r\n            uid: this.$store.state.uid\r\n          }\r\n        })\r\n        // 教师端请求课程\r\n        const tCourse = request({\r\n          url: '/api/course/getCourses',\r\n          method: 'get',\r\n          params: {\r\n            uid: this.$store.state.uid\r\n          }\r\n        })\r\n\r\n        axios.all([stCourse, tCourse])\r\n        .then(axios.spread((res1, res2) => {\r\n          this.courses = [...res1.data, ...res2.data]\r\n          this.archiveCourses = this.courses.filter(e => e.archiveStatus === 1)\r\n          this.courses = this.courses.filter(e => e.archiveStatus === 0)\r\n        }))\r\n      },\r\n      cc(title) {\r\n        if (title === '创建课程') {\r\n          this.cno = ''\r\n          this.course.semester = ''\r\n          this.course.cname = ''\r\n          this.course.year = ''\r\n        }\r\n        this.course_select = title\r\n        this.createCourseDialog = true\r\n      },\r\n      changeAddDisable() {\r\n        this.inputNotNull = this.cno === ''\r\n      },\r\n      changeCreateDisable() {\r\n        if (this.course.cname !== '' && this.course.year !== '' && this.course.semester !== '') {\r\n          this.createNotNull = false\r\n        } else {\r\n          this.createNotNull = true\r\n        }\r\n      },\r\n      cancel() {\r\n        this.cno = ''\r\n        this.addCourseDialog = false\r\n        this.createCourseDialog = false\r\n        this.course.semester = ''\r\n        this.course.cname = ''\r\n        this.course.year = ''\r\n        this.archiveDialog = false\r\n        this.changeAddDisable()\r\n        this.changeCreateDisable()\r\n      },\r\n      addCourse() {\r\n        if (this.course_select === '创建课程') {\r\n          // 请求\r\n          request({\r\n            url: '/api/course/addCourse',\r\n            method: 'post', \r\n            data: this.course\r\n          }).then(res => {\r\n            if (res.data === true) { \r\n              this.$message.success('添加成功')\r\n              this.getCourses()\r\n            } else {\r\n              this.$message.error('添加失败')\r\n            }\r\n\r\n            this.cancel()\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.cancel()\r\n          })\r\n        } else {\r\n          request({\r\n            url: '/api/course/updateCourse',\r\n            method: 'put',\r\n            params: {\r\n              name: this.course.cname,\r\n              year: this.course.year,\r\n              semester: this.course.semester,\r\n              cno: this.course.cno\r\n            }\r\n          }).then(res => {\r\n            if (res.data === true) {\r\n              this.$message.success('修改成功')\r\n              this.getCourses()\r\n            } else {\r\n              this.$message.error('编辑失败')\r\n            }\r\n\r\n            this.cancel()\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.cancel()\r\n          })\r\n        }\r\n        \r\n      },\r\n      editCourse(course) {\r\n        // 拷贝课程\r\n        this.course = JSON.parse(JSON.stringify(course))\r\n        this.course.cname = this.course.name\r\n        delete this.course.name\r\n        // create course\r\n        this.cc('编辑课程')\r\n      },\r\n      deleteCourse(course, ext) {\r\n        // 弹出弹框\r\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 通过异步删除\r\n          request({\r\n            url: '/api/course/updateCourse',\r\n            method: 'put',\r\n            params: {\r\n              cno: course.cno,\r\n              deleteStatus: 1\r\n            }\r\n          }).then(res => {\r\n            // 确定操作\r\n            if (res.data === true) {\r\n              if (ext) {\r\n              } else {\r\n                // 清除事件，避免报错\r\n                const xx = 'c' + course.cno\r\n                this.$refs[xx][0].recoverStyle()\r\n              }\r\n\r\n              this.getCourses()\r\n\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '删除出错'\r\n              })\r\n            }\r\n          })\r\n          \r\n        }).catch(() => {\r\n          // 取消操作\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })          \r\n        })\r\n        // end\r\n      },\r\n      archiveCourse(course) {\r\n        this.$confirm('此操作将归档该课程, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 通过异步归档\r\n          request({\r\n            url: '/api/course/updateCourse',\r\n            method: 'put',\r\n            params: {\r\n              cno: course.cno,\r\n              archive: 1\r\n            }\r\n          }).then(res => {\r\n            // 确定操作\r\n            if (res.data === true) {\r\n              // 清除事件，避免报错\r\n              const xx = 'c' + course.cno\r\n              this.$refs[xx][0].recoverStyle()\r\n\r\n              this.getCourses()\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '归档出错'\r\n              })\r\n            }\r\n          })\r\n          \r\n        }).catch(() => {\r\n          // 取消操作\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消归档'\r\n          })          \r\n        })\r\n        // end\r\n      },\r\n      recover(course) {\r\n        let requestBody = {}\r\n        if (this.permission === '2') {\r\n          requestBody = {\r\n            url: '/api/course/updateCourse',\r\n            method: 'put',\r\n            params: {\r\n              cno: course.cno,\r\n              archive: 0\r\n            }\r\n          }\r\n        } else {\r\n          requestBody = {\r\n            url: '/api/course/changeStatus',\r\n            method: 'put',\r\n            params: {\r\n              cno: course.cno,\r\n              uid: this.$store.state.uid,\r\n              status: '0'\r\n            }\r\n          }\r\n        }\r\n\r\n        this.$confirm('此操作该课程恢复, 是否继续?', '要恢复此课程么?', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 通过异步恢复\r\n          request(requestBody).then(res => {\r\n            // 确定操作\r\n            if (res.data === true) {\r\n              this.getCourses()\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '恢复出错'\r\n              })\r\n            }\r\n          })\r\n        })\r\n        // end\r\n        this.cancel()\r\n      },\r\n      dropOut(course, ext) {\r\n        // 退课\r\n        this.$confirm('此操作会将本课程退了, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 通过退课归档\r\n          request({\r\n            url: '/api/course/changeStatus',\r\n            method: 'put',\r\n            params: {\r\n              cno: course.cno,\r\n              uid: this.$store.state.uid,\r\n              status: '2'\r\n            }\r\n          }).then(res => {\r\n            // 确定操作\r\n            if (res.data === true) {\r\n              if (ext) {\r\n              } else {\r\n                // 清除事件，避免报错\r\n                const xx = 'c' + course.cno\r\n                this.$refs[xx][0].recoverStyle()\r\n\r\n                this.getCourses()\r\n              }\r\n              \r\n\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '退课出错'\r\n              })\r\n            }\r\n          })\r\n          \r\n        }).catch(() => {\r\n          // 取消操作\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消退课'\r\n          })          \r\n        })\r\n        // end\r\n      },\r\n      addToACourse() {\r\n        console.log(this.$store.state.uid)\r\n\r\n        request({\r\n          url: '/api/course/addMember',\r\n          method: 'put',\r\n          params: {\r\n            cno: this.cno,\r\n            uid: this.$store.state.uid\r\n          }\r\n        }).then(res => {\r\n          if (res.data) {\r\n            this.getCourses()\r\n          } else {\r\n            this.$message.error('未找到相应的课程')\r\n          }\r\n        }).catch(err => {\r\n          console.log(err)\r\n        })\r\n\r\n        this.cancel()\r\n      },\r\n      clearStyle() {\r\n        for (let course of this.courses) {\r\n          // 清除事件，避免报错\r\n          const xx = 'c' + course.cno\r\n          this.$refs[xx][0].recoverStyle()\r\n        }\r\n      },\r\n      gotoTask(course) {\r\n        this.clearStyle()\r\n        if (this.permission == '2') {\r\n          this.$router.push({path: `/teachertask/${course.cno}`})\r\n        } else {\r\n          this.$router.push({path: `/studenttask/${course.cno}`})\r\n        }\r\n        \r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .outer {\r\n    height: 100%;\r\n  }\r\n\r\n  .course-nav {\r\n    padding-top: 100px;\r\n    position: relative;\r\n  }\r\n  .course-nav>div {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    padding-bottom: 12px;\r\n    box-shadow: 0 1px 0 0 rgba(226,230,237,1);\r\n    margin-bottom: 20px;\r\n  }\r\n  .course-nav>div>div:first-child {\r\n    float: right;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    background: rgba(50,186,240,1);\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: rgba(255,255,255,1);\r\n    padding: 5px 15px;\r\n  }\r\n  .course-nav>div>div:nth-child(2) {\r\n    float: right;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    background: rgba(50,186,240,1);\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: rgba(255,255,255,1);\r\n    padding: 5px 15px;\r\n    margin-right: 10px;\r\n  }\r\n  .course-nav>div>div:nth-child(3) {\r\n    float: right;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    background: rgba(50,186,240,1);\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: rgba(255,255,255,1);\r\n    padding: 5px 15px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .content {\r\n    width: 90%; \r\n    margin: 0 auto;\r\n  }\r\n\r\n  .archivePage {\r\n    max-height: 300px;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n  }\r\n  /* 滑动槽 */\r\n  .archivePage::-webkit-scrollbar {\r\n    width: 6px;\r\n    height: 6px;\r\n  }\r\n  /* 滑动槽背景 */\r\n  .archivePage::-webkit-scrollbar-track {\r\n    border-radius: 3px;\r\n    background: rgba(255, 255, 255, .6);\r\n  }\r\n  /* 滚动条 */\r\n  .archivePage::-webkit-scrollbar-thumb {\r\n    border-radius: 3px;\r\n    background: rgba(126, 214, 223, .6);\r\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\r\n  }\r\n\r\n  .archivePage>div>div:first-child {\r\n    display: flex;\r\n    flex-direction: column;\r\n    color: #fff;\r\n  }\r\n  .archivePage>div {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    background: #feca57;\r\n    height: 72px;\r\n    padding: 24px 16px 14px 16px;\r\n  }\r\n  .archivePage>div>div:first-child>div:first-child {\r\n    margin-bottom: 10px;\r\n    margin-top: 5px;\r\n  }\r\n  .archivePage>div:not(:last-child) {\r\n    margin-bottom: 10px;\r\n  }\r\n  .archivePage>div>div:last-child>span {\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n    color: #ff6b6b;\r\n    line-height: 72px;\r\n  }\r\n  .input-cno {\r\n    margin-bottom: 10px;\r\n  }\r\n  .input-cno~div {\r\n    width: 80%;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .create>div:first-child>input {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    height: 38px;\r\n    width: 260px;\r\n    font-size: 14px;\r\n    outline: 0;\r\n    border: none;\r\n    background: 0 0;\r\n    cursor: text;\r\n    margin-left: 10px;\r\n  }\r\n  .create>div:nth-child(2)>.el-select {\r\n    margin-right: 10px;\r\n    margin-left: 10px;\r\n  }\r\n  .create>div:nth-child(3) {\r\n    margin-top: 20px;\r\n    margin-right: 40px;\r\n    text-align: right;\r\n  }\r\n\r\n  .content>div {\r\n    float: left;\r\n    width: 300px;\r\n    padding-bottom: 30px;\r\n  }\r\n  .content>div:after {\r\n    content: '';\r\n    clear: both;\r\n  }\r\n</style>"]}]}