{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Home\\HomeCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Home\\HomeCard.vue","mtime":1592466682000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3JlcXVlc3R9IGZyb20gJy4uLy4uL25ldHdvcmsvcmVxdWVzdCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnSG9tZUNhcmQnLA0KICBwcm9wczogew0KICAgIGNvdXJzZTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIGluZGV4OiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgd29ya3M6IFtdLA0KICAgICAgbWVtYmVyTnVtOiAwLA0KICAgICAgYWRkRXZlbnQ6IChlKSA9PiB7DQogICAgICAgICAgaWYgKCF0aGlzLiRlbC5jb250YWlucyhlLnRhcmdldCkpIHsNCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucHJvcCR7dGhpcy5pbmRleCsxfWApLnN0eWxlLmRpc3BsYXkgPSAibm9uZSINCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBzaG93U2VtZXN0ZXIoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb3Vyc2Uuc2VtZXN0ZXIgPT09ICIxIiA/ICfnrKzkuIDlrabmnJ8nIDogJ+esrOS6jOWtpuacnycNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2LnByb3AtcGFyZW50Iikuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBwcm9wLXBhcmVudCR7dGhpcy5pbmRleCsxfWApDQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb3AtcGFyZW50JHt0aGlzLmluZGV4KzF9Pi5wcm9wYCkuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBwcm9wIHByb3Ake3RoaXMuaW5kZXgrMX1gKQ0KDQogICAgLy8g5LqL5Lu255uR5ZCs5ZmoDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hZGRFdmVudCwgZmFsc2UpDQoNCiAgICAvLyDor7fmsYLmiJDlkZjmlbDph4/vvIzlj6rljIXlkKvlrabnlJ8NCiAgICByZXF1ZXN0KHsNCiAgICAgIHVybDogJy9hcGkvY291cnNlL2dldE1lbWJlcnMnLA0KICAgICAgbWV0aG9kOiAnZ2V0JywNCiAgICAgIHBhcmFtczogew0KICAgICAgICBjbm86IHRoaXMuY291cnNlLmNubw0KICAgICAgfQ0KICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgIHRoaXMubWVtYmVyTnVtID0gcmVzLmRhdGENCiAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgIH0pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBtb3JlKCkgew0KICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb3Ake3RoaXMuaW5kZXgrMX1gKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIg0KICAgIH0sDQogICAgZWRpdENvdXJzZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2VkaXQtY291cnNlJywgdGhpcy5jb3Vyc2UpDQogICAgfSwNCiAgICBkZWxldGVDb3Vyc2UoKSB7DQogICAgICB0aGlzLiRlbWl0KCdkZWxldGUtY291cnNlJywgdGhpcy5jb3Vyc2UpDQogICAgfSwNCiAgICBhcmNoaXZlQ291cnNlKCkgew0KICAgICAgdGhpcy4kZW1pdCgnYXJjaGl2ZS1jb3Vyc2UnLCB0aGlzLmNvdXJzZSkNCiAgICB9LA0KICAgIHJlY292ZXJTdHlsZSgpIHsNCiAgICAgIC8vIOi/mOWOn+S6i+S7tu+8jOmBv+WFjeWJjeerr+aJvuS4jeWIsOS6i+S7tuiAjOaKpeW3rumUmQ0KDQogICAgICAvLyDkuovku7bnm5HlkKzlmagNCiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYWRkRXZlbnQsIGZhbHNlKQ0KDQogICAgICAvLyDov5jljp8NCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5wcm9wJHt0aGlzLmluZGV4KzF9YCkuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBwcm9wYCkNCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5wcm9wLXBhcmVudCR7dGhpcy5pbmRleCsxfWApLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgcHJvcC1wYXJlbnRgKQ0KICAgIH0sDQogICAgZGVsZXRlQ291cnNlTWVtYmVyKCkgew0KICAgICAgdGhpcy4kZW1pdCgnZHJvcC1vdXQnLCB0aGlzLmNvdXJzZSkNCiAgICB9LA0KICAgIGdvdG9UYXNrKCkgew0KICAgICAgdGhpcy4kZW1pdCgnZ290by10YXNrJywgdGhpcy5jb3Vyc2UpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["HomeCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomeCard.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"title\">\r\n      <!-- 课程名称 -->\r\n      <div><span @click=\"gotoTask\">{{course.name}}</span></div>\r\n      <!-- 加课吗和学期 -->\r\n      <div>\r\n        <div>加课码: {{course.cno}}</div>\r\n        <div>\r\n          <div>{{course.year}}</div>\r\n          <div>{{showSemester}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"homework\">\r\n      <div>近期作业</div>\r\n      <div>无</div>\r\n    </div>\r\n\r\n    <div class=\"bottom\">\r\n      <div>成员{{memberNum}}人</div>\r\n      <div @click.stop=\"more\" class=\"prop-parent\">\r\n        更多\r\n        <!-- 弹窗 -->\r\n        <div class=\"prop\" v-if=\"course.admin.userId == this.$store.state.uid\">\r\n          <div @click=\"editCourse\">编辑</div>\r\n          <div @click=\"deleteCourse\">删除</div>\r\n          <div @click=\"archiveCourse\">归档</div>\r\n        </div>\r\n        <div class=\"prop\" v-else>\r\n          <div @click=\"deleteCourseMember\">退课</div>\r\n        </div>\r\n      </div>   \r\n    </div>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport {request} from '../../network/request'\r\n\r\nexport default {\r\n  name: 'HomeCard',\r\n  props: {\r\n    course: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    index: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      works: [],\r\n      memberNum: 0,\r\n      addEvent: (e) => {\r\n          if (!this.$el.contains(e.target)) {\r\n          document.querySelector(`.prop${this.index+1}`).style.display = \"none\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showSemester() {\r\n      return this.course.semester === \"1\" ? '第一学期' : '第二学期'\r\n    }\r\n  },\r\n  mounted() {\r\n    document.querySelector(\"div.prop-parent\").setAttribute(\"class\", `prop-parent${this.index+1}`)\r\n    document.querySelector(`.prop-parent${this.index+1}>.prop`).setAttribute(\"class\", `prop prop${this.index+1}`)\r\n\r\n    // 事件监听器\r\n    window.addEventListener('click', this.addEvent, false)\r\n\r\n    // 请求成员数量，只包含学生\r\n    request({\r\n      url: '/api/course/getMembers',\r\n      method: 'get',\r\n      params: {\r\n        cno: this.course.cno\r\n      }\r\n    }).then(res => {\r\n      this.memberNum = res.data\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  },\r\n  methods: {\r\n    more() {\r\n      document.querySelector(`.prop${this.index+1}`).style.display = \"block\"\r\n    },\r\n    editCourse() {\r\n      this.$emit('edit-course', this.course)\r\n    },\r\n    deleteCourse() {\r\n      this.$emit('delete-course', this.course)\r\n    },\r\n    archiveCourse() {\r\n      this.$emit('archive-course', this.course)\r\n    },\r\n    recoverStyle() {\r\n      // 还原事件，避免前端找不到事件而报差错\r\n\r\n      // 事件监听器\r\n      window.removeEventListener('click', this.addEvent, false)\r\n\r\n      // 还原\r\n      document.querySelector(`div.prop${this.index+1}`).setAttribute(\"class\", `prop`)\r\n      document.querySelector(`div.prop-parent${this.index+1}`).setAttribute(\"class\", `prop-parent`)\r\n    },\r\n    deleteCourseMember() {\r\n      this.$emit('drop-out', this.course)\r\n    },\r\n    gotoTask() {\r\n      this.$emit('goto-task', this.course)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .card {\r\n    width: 270px;\r\n    background: #fff;\r\n    border: 1px solid #e2e6ed;\r\n    border-radius: 8px;\r\n    position: relative;\r\n  }\r\n\r\n  /* 标题部分 */\r\n  .title {\r\n    width: 100%;\r\n    height: 95px;\r\n    padding: 18px 0 14px 0;\r\n    background: #48dbfb;\r\n    border-radius: 8px 8px 0 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    color: #fff;\r\n  }\r\n  .title>div:first-child {\r\n    margin-left: 18px;\r\n    margin-right: 48px;\r\n    font-size: 20px;\r\n    \r\n  }\r\n  .title>div:first-child>span {\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0);\r\n    cursor: pointer;\r\n  }\r\n  .title>div:first-child>span:hover {\r\n    border-bottom: 1px solid rgba(255, 255, 255, 1);\r\n  }\r\n  .title>div:last-child {\r\n    font-family: PingFang-SC-Medium;\r\n    text-align: center;\r\n    margin-left: 18px;\r\n    margin-right: 18px;\r\n    padding-left: 2px;\r\n    padding-right: 4px;\r\n    margin-top: 13px;\r\n  }\r\n  .title>div:last-child>div:first-child {\r\n    float: left;\r\n    margin-top: 40px;\r\n    font-size: 14px;\r\n  }\r\n  .title>div:last-child>div:last-child {\r\n    margin-top: 30px;\r\n    float: right;\r\n    color: rgba(255, 255, 255, .8);\r\n    font-size: 12px;\r\n  }\r\n\r\n  /* 近期作业显示情况 */\r\n  .homework {\r\n    margin-top: 5px;\r\n    padding: 0 16px;\r\n    height: 105px;\r\n    border-bottom: 1px solid rgba(226, 230, 237, 1);\r\n  }\r\n  .homework>div {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    font-size: 14px;\r\n  }\r\n  .homework>div:first-child {\r\n    font-weight: 500;\r\n    color: rgba(31,32,35,.7);\r\n  }\r\n\r\n  .bottom {\r\n    height: 35px;\r\n    line-height: 35px;\r\n    font-size: 12px;\r\n  }\r\n  .bottom>div:first-child {\r\n    float: left;\r\n    margin-left: 20px;\r\n    cursor: pointer;\r\n  }\r\n  .bottom>div:last-child {\r\n    position: relative;\r\n    float: right;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n    color: #0abde3;\r\n  }\r\n\r\n  .prop {\r\n    width: 128px;\r\n    position: absolute;\r\n    background: #fff;\r\n    box-shadow: 1px 2px 3px rgba(0,0,0,.2);\r\n    right: 10px;\r\n    bottom: 30px;\r\n    padding: 5px 0;\r\n    display: none;\r\n  }\r\n  .prop>div {\r\n    width: 100%;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    text-align: center;\r\n  }\r\n  .prop>div:hover {\r\n    background: rgba(0,0,0,.1);\r\n  }\r\n</style>"]}]}