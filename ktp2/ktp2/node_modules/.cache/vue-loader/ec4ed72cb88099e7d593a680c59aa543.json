{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\CourseMember\\CourseMember.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\CourseMember\\CourseMember.vue","mtime":1592744233731},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cmVxdWVzdH0gZnJvbSAnLi4vLi4vbmV0d29yay9yZXF1ZXN0JwppbXBvcnQgQ291cnNlTWVtYmVyTmF2IGZyb20gJ2NvbXBvbmVudHMvY29udGVudC9Db3Vyc2VNZW1iZXJOYXYnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvdXJzZU1lbWJlciIsCiAgY29tcG9uZW50czogewogICAgQ291cnNlTWVtYmVyTmF2CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGVhY2hlcnM6IFtdLAogICAgICBzdHVkZW50czogW10sCiAgICAgIHN0dUNvdW50OiAwLAogICAgICB0ZWFDb3VudDogMCwKICAgICAgaXNBY3RpdmU6IDEsCiAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICBkZWxWaXNpYmxlOiBmYWxzZSwgLy/liKDpmaTmoYbnirbmgIEKICAgICAgZGVsYXJyOiBbXSwgLy/liKDpmaTmlbDmja4KICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLCAvL+WkmumAieaVsOaNrgogICAgICBjaGVja1N0YXR1czogW10sCiAgICAgIGNuYW1lOiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBjb3Vyc2VDb25maWcgPSByZXF1ZXN0KHsKICAgICAgdXJsOiAnL2FwaS9jb3Vyc2UvZ2V0Q291cnNlQnlDbm8nLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICBjbm86IHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8KICAgICAgfQogICAgfSkKCiAgICBjb25zdCB1c2VyQ29uZmlnID0gcmVxdWVzdCh7CiAgICAgIHVybDogJy9hcGkvdXNlckxpc3QnLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICBjbm86IHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8KICAgICAgfQogICAgfSkKCiAgICBheGlvcy5hbGwoW2NvdXJzZUNvbmZpZywgdXNlckNvbmZpZ10pCiAgICAudGhlbihheGlvcy5zcHJlYWQoKHJlczEsIHJlczIpID0+IHsKICAgICAgdGhpcy5jbmFtZSA9IHJlczEuZGF0YS5uYW1lCgogICAgICB0aGlzLnN0dWRlbnRzID0gcmVzMi5kYXRhLmZpbHRlcihlID0+IGUucGVybWlzc2lvbi5waWQgPT0gJzEnKQogICAgICB0aGlzLnRlYWNoZXJzID0gcmVzMi5kYXRhLmZpbHRlcihlID0+IGUucGVybWlzc2lvbi5waWQgPT0gJzInKQogICAgICB0aGlzLnN0dUNvdW50ID0gdGhpcy5zdHVkZW50cy5sZW5ndGgKICAgICAgdGhpcy50ZWFDb3VudCA9IHRoaXMudGVhY2hlcnMubGVuZ3RoCiAgICAgIC8vIOWIneWni+WMlgogICAgICB0aGlzLmNoZWNrU3RhdHVzID0gdGhpcy5zdHVkZW50cy5tYXAoZSA9PiB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0pCiAgICB9KSkuY2F0Y2goZXJyID0+IHtjb25zb2xlLmxvZyhlcnIpfSkKCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2UobnVtKSB7CiAgICAgIHRoaXMuaXNBY3RpdmUgPSBudW0KICAgIH0sCgogICAgLy/ljZXliKAKICAgIGRlbEhhbmRsZShpbmRleCkgewogICAgICB0aGlzLmRlbFZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuZGVsYXJyLnB1c2godGhpcy5zdHVkZW50c1tpbmRleF0pCiAgICB9LAogICAgLy/lpJrliKAKICAgIGRlbEFsbCgpIHsKICAgICAgdGhpcy5kZWxWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmRlbGFyciA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24KICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IFtdCiAgICB9LAogICAgLy/lpJrpgIkKICAgIG11dGlwbHlTZWxlY3Rpb25NZXRob2QoaXRlbSwgaW5kZXgpIHsKICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLmNoZWNrU3RhdHVzKSB7CiAgICAgICAgaWYgKGl0ZW0gPT0gZmFsc2UpIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlCiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICB0aGlzLmNoZWNrZWQgPSB0cnVlCiAgICAgIH0KICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uaW5kZXhPZihpdGVtKSA9PSAtMSkKICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLnB1c2goaXRlbSkKICAgICAgZWxzZQogICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ucmVtb3ZlKGl0ZW0pCiAgICB9LAogICAgLy/lhajpgIkKICAgIHNlbGVjdEFsbCgpIHsKICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLmNoZWNrU3RhdHVzKSB7CiAgICAgICAgdGhpcy5jaGVja1N0YXR1c1tpXSA9IHRoaXMuY2hlY2tlZAogICAgICB9CiAgICAgIGlmKHRoaXMuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IFsuLi50aGlzLnN0dWRlbnRzXTsKICAgICAgfWVsc2UgewogICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPVtdCiAgICAgIH0KCiAgICB9LAogICAgY2xlYXJTZWxlY3QoKSB7CiAgICAgIHRoaXMuY2hlY2tTdGF0dXMgPSB0aGlzLnN0dWRlbnRzLm1hcChlID0+IGZhbHNlKQogICAgfSwKICAgIGRlbGV0ZVJvdygpIHsKICAgICAgLy8g5Yig6Zmk5Zyo5Yig6Zmk5pWw57uE5Lit55qE5omA5pyJ5pWw5o2uCiAgICAgIC8vIOWPluW3rumbhgogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmw6ICcvYXBpL2NvdXJzZS9kZWxldGVNZW1iZXJzP2Nubz0nICsgdGhpcy4kcm91dGUucGFyYW1zLmNubywKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICBkYXRhOiB0aGlzLmRlbGFycgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICB0aGlzLnN0dWRlbnRzID0gdGhpcy5zdHVkZW50cy5maWx0ZXIodiA9PiB0aGlzLmRlbGFyci5pbmRleE9mKHYpID09IC0xKQogICAgICAgICAgdGhpcy5kZWxhcnIgPSBbXQogICAgICAgICAgdGhpcy5zdHVDb3VudCA9IHRoaXMuc3R1ZGVudHMubGVuZ3RoCiAgICAgICAgICB0aGlzLmRlbFZpc2libGUgPSBmYWxzZQogICAgICAgICAgdGhpcy5jbGVhclNlbGVjdCgpCiAgICAgICAgfQogICAgICB9LAogICAgICApCgogICAgfSwKICAgIGJhY2soKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5wZXJtaXNzaW9uID09ICcyJykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvdGVhY2hlcnRhc2svJHt0aGlzLiRyb3V0ZS5wYXJhbXMuY25vfWApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9zdHVkZW50dGFzay8ke3RoaW9zLiRyb3V0ZS5wYXJhbXMuY25vfWApCiAgICAgIH0KICAgIH0sCgogICAgLy/lj5bmtojmk43kvZwKICAgIGNhbmNsZSgpewogICAgICB0aGlzLmRlbGFyciA9IFtdCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBbXQogICAgICB0aGlzLmRlbFZpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmNsZWFyU2VsZWN0KCkKICAgIH0KICB9LAoKfTsKCkFycmF5LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodmFsKSB7CiAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKHZhbCk7CiAgaWYgKGluZGV4ID4gLTEpIHsKICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTsKICB9Cn0K"},{"version":3,"sources":["CourseMember.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CourseMember.vue","sourceRoot":"src/views/CourseMember","sourcesContent":["<template>\n  <div class=\"outer\">\n    <course-member-nav :cname=\"cname\" :cno=\"$route.params.cno\" @back=\"back\" />\n\n    <div class=\"content\">\n      <div class=\"lstyle\">\n        <div>\n          <ul>\n            <li :class=\"{active:isActive===1}\" @click=\"change(1)\">教学团队（{{teaCount}}）</li>\n            <li :class=\"{active:isActive===2}\" @click=\"change(2)\" style=\"border-radius: 0%;\">全部学生（学生{{stuCount}}）</li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"rstyle\">\n        <div class=\"members\">\n          <div class=\"tittle\">\n            <span :class=\"{hide:isActive!=1}\">教学团队（老师{{teaCount}}）</span>\n            <span :class=\"{hide:isActive!=2}\">全部学生（学生{{stuCount}}）</span>\n          </div>\n          <div class=\"tittle\" v-if=\"$store.state.permission == '2'\" :class=\"{hide:isActive!=2}\" style=\"background-color: white;\">\n            <span>\n              <el-checkbox @change=\"selectAll()\" style=\"margin-right: 30px;\" v-model=\"checked\">全选 已选（{{multipleSelection.length}}）人\n              </el-checkbox>\n              <el-button type=\"primary\" :disabled=\"multipleSelection.length == 0\" @click=\" delAll\">删除成员</el-button>\n            </span>\n          </div>\n          <ul :class=\"{hide:isActive!=1}\">\n            <li v-for=\"(item,index) in teachers\">\n              <p class=\"tname\">\n                <span style=\"margin-left: 24px;margin-top: 20px;\" :title=\"item.name\">{{item.name}}</span>\n              </p>\n              <p class=\"mail\" title=\"item.userId\">{{item.userId}}</p>\n              <span style=\"line-height: 60px;\">（{{item.identifyNo}}）</span>\n            </li>\n          </ul>\n          <ul :class=\"{hide:isActive!=2}\">\n            <li class=\"stu-list\" v-for=\"(item,index) in students\">\n              <el-checkbox v-if=\"$store.state.permission == '2'\" v-model=\"checkStatus[index]\" style=\"line-height: 55px;margin-right: 30px;\"\n                           @change.stop.native=\"mutiplySelectionMethod(item, index)\">\n              </el-checkbox>\n              <p class=\"sname\">\n                <span style=\"margin-left: 24px;margin-top: 20px;\" :title=\"item.name\">{{item.name}}</span>\n              </p>\n              <p style=\"margin-left: 50px;margin-top: 20px;\" :title=\"item.userId\">{{item.userId}}</p>\n              <p class=\"mail\" title=\"item.identifyNo\">{{item.identifyNo}}</p>\n              <p v-if=\"$store.state.permission == '2'\" @click=\"delHandle(index)\" class=\"delete\" style=\"line-height: 60px;color:#32BAF0;\">删除</p>\n            </li>\n\n\n          </ul>\n          <!-- 删除提示框 -->\n          <el-dialog title=\"提示\" :visible.sync=\"delVisible\" width=\"300px\" center>\n            <div class=\"del-dialog-cnt\">删除不可恢复，是否确定删除？</div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"cancle\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"deleteRow\">确 定</el-button>\n            </span>\n          </el-dialog>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {request} from '../../network/request'\n  import CourseMemberNav from 'components/content/CourseMemberNav'\n  import axios from 'axios'\n\n\n  export default {\n    name: \"CourseMember\",\n    components: {\n      CourseMemberNav\n    },\n    data() {\n      return {\n        teachers: [],\n        students: [],\n        stuCount: 0,\n        teaCount: 0,\n        isActive: 1,\n        checked: false,\n        delVisible: false, //删除框状态\n        delarr: [], //删除数据\n        multipleSelection: [], //多选数据\n        checkStatus: [],\n        cname: ''\n      };\n    },\n    mounted() {\n      const courseConfig = request({\n        url: '/api/course/getCourseByCno',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno\n        }\n      })\n\n      const userConfig = request({\n        url: '/api/userList',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno\n        }\n      })\n\n      axios.all([courseConfig, userConfig])\n      .then(axios.spread((res1, res2) => {\n        this.cname = res1.data.name\n\n        this.students = res2.data.filter(e => e.permission.pid == '1')\n        this.teachers = res2.data.filter(e => e.permission.pid == '2')\n        this.stuCount = this.students.length\n        this.teaCount = this.teachers.length\n        // 初始化\n        this.checkStatus = this.students.map(e => {\n          return false\n        })\n      })).catch(err => {console.log(err)})\n\n    },\n    methods: {\n      change(num) {\n        this.isActive = num\n      },\n\n      //单删\n      delHandle(index) {\n        this.delVisible = true\n        this.delarr.push(this.students[index])\n      },\n      //多删\n      delAll() {\n        this.delVisible = true\n        this.delarr = this.multipleSelection\n        this.multipleSelection = []\n      },\n      //多选\n      mutiplySelectionMethod(item, index) {\n        for (let item of this.checkStatus) {\n          if (item == false) {\n            this.checked = false\n            break\n          }\n          this.checked = true\n        }\n        if (this.multipleSelection.indexOf(item) == -1)\n          this.multipleSelection.push(item)\n        else\n          this.multipleSelection.remove(item)\n      },\n      //全选\n      selectAll() {\n        for (let i in this.checkStatus) {\n          this.checkStatus[i] = this.checked\n        }\n        if(this.checked == true) {\n          this.multipleSelection = [...this.students];\n        }else {\n          this.multipleSelection =[]\n        }\n\n      },\n      clearSelect() {\n        this.checkStatus = this.students.map(e => false)\n      },\n      deleteRow() {\n        // 删除在删除数组中的所有数据\n        // 取差集\n        request({\n          url: '/api/course/deleteMembers?cno=' + this.$route.params.cno,\n          method: 'post',\n          data: this.delarr\n        }).then(res => {\n          if (res.data) {\n            this.students = this.students.filter(v => this.delarr.indexOf(v) == -1)\n            this.delarr = []\n            this.stuCount = this.students.length\n            this.delVisible = false\n            this.clearSelect()\n          }\n        },\n        )\n\n      },\n      back() {\n        if (this.$store.state.permission == '2') {\n          this.$router.push(`/teachertask/${this.$route.params.cno}`)\n        } else {\n          this.$router.push(`/studenttask/${thios.$route.params.cno}`)\n        }\n      },\n\n      //取消操作\n      cancle(){\n        this.delarr = []\n        this.multipleSelection = []\n        this.delVisible = false\n        this.clearSelect()\n      }\n    },\n\n  };\n\n  Array.prototype.remove = function (val) {\n    var index = this.indexOf(val);\n    if (index > -1) {\n      this.splice(index, 1);\n    }\n  }\n</script>\n\n<style scoped>\n  .outer {\n    width: 1224px;\n    padding-top: 112px;\n    padding-bottom: 60px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  .content {\n    background: #FFF;\n    border: 1px solid rgba(226, 230, 237, 1);\n\n    min-height: 600px;\n    border-radius: 8px;\n    position: relative;\n    zoom: 1;\n  }\n\n  .lstyle {\n    width: 286px;\n    min-height: 300px;\n    float: left;\n  }\n\n  .lstyle ul li {\n    height: 55px;\n    line-height: 55px;\n    padding: 0 24px;\n    cursor: pointer;\n    font-weight: 500;\n    color: rgba(59, 61, 69, 1);\n    font-family: PingFangSC-Medium;\n    font-size: 16px;\n    border-radius: 8px 0 0;\n    list-style: none;\n  }\n\n  .lstyle ul li:hover {\n    background-color: #e4edfd;\n  }\n\n  .lstyle ul li.active {\n    background: #32BAF0 !important;\n    color: #FFF;\n  }\n\n  .rstyle {\n    width: 936px;\n    border-left: 1px solid rgba(226, 230, 237, 1);\n    min-height: 600px;\n    margin-left: -1px;\n    float: left;\n  }\n\n  .members .tittle {\n    padding: 0 12px 0 25px;\n    height: 55px;\n    background: rgba(241, 243, 244, 1);\n    border-radius: 0 8px 0 0;\n    line-height: 55px;\n  }\n\n  .members ul {\n    padding-bottom: 60px;\n    max-height: 430px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n\n  .members ul li {\n    height: 60px;\n    padding: 0 25px;\n    list-style: none;\n  }\n\n  .members ul li p.tname {\n    width: 300px;\n  }\n\n  .members ul li p.sname {\n    width: 150px;\n  }\n\n  .members ul li p {\n    float: left;\n    margin-right: 20px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n\n  .members ul li:hover {\n    background: rgba(241, 243, 244, 1);\n  }\n\n  .tname img {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    margin-top: 15px;\n  }\n\n  .sname img {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    margin-top: 15px;\n  }\n\n  .members ul li p.tname span {\n    display: inline-block;\n    max-width: 200px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    vertical-align: top;\n    margin-top: 20px;\n  }\n\n  .members ul li p.sname span {\n    display: inline-block;\n    max-width: 200px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    vertical-align: top;\n    line-height: 20px;\n  }\n\n  .mail {\n    min-width: 150px;\n    max-width: 100px;\n    margin-top: 20px;\n  }\n\n  .delete {\n    cursor: pointer\n  }\n\n  li.tname > p.mail {\n    width: 300px;\n  }\n\n  li.sname > p.mail {\n    width: 300px;\n  }\n\n  .hide {\n    display: none;\n  }\n\n  .el-pagination {\n    padding: 2px 400px;\n  }\n\n  .el-checkbox {\n    float: left;\n  }\n\n  .stu-list p {\n    width: 150px;\n  }\n  .stu-list p:last-child {\n    text-align: right;\n  }\n</style>\n"]}]}