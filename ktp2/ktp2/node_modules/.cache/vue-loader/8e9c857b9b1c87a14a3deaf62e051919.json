{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\TeacherTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\src\\views\\Task\\TeacherTask.vue","mtime":1592644562000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\ktp2\\ktp2\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBQZXJzb25hbERlbGl2ZXIgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L1BlcnNvbmFsRGVsaXZlciI7CmltcG9ydCBXb3JrTmF2IGZyb20gJ2NvbXBvbmVudHMvY29udGVudC9Xb3JrTmF2JwppbXBvcnQgR3JvdXBEZWxpdmVyIGZyb20gJ2NvbXBvbmVudHMvY29udGVudC9Hcm91cERlbGl2ZXInCmltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICcuLi8uLi9uZXR3b3JrL3JlcXVlc3QnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUZWFjaGVyVGFzayIsCiAgY29tcG9uZW50czoge1BlcnNvbmFsRGVsaXZlciwgV29ya05hdiwgR3JvdXBEZWxpdmVyfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0RlbGl2ZXI6IDAsCiAgICAgIHRhc2tzOiBbXSwKICAgICAgbG9hZEtleTogZmFsc2UsCiAgICAgIGVkaXRpbmc6IFtdLAogICAgICBmb2N1czogJycsCiAgICAgIGNvdXJzZToge30KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICByZXF1ZXN0KHsKICAgICAgdXJsOiAnL2FwaS9jb3Vyc2UvZ2V0Q291cnNlQnlDbm8nLAogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICBwYXJhbXM6IHsKICAgICAgICBjbm86IHRoaXMuJHJvdXRlLnBhcmFtcy5jbm8KICAgICAgfQogICAgfSkudGhlbihyZXMgPT4gewogICAgICB0aGlzLmNvdXJzZSA9IHJlcy5kYXRhCiAgICAgIHRoaXMuc2VuZCh0cnVlKQogICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyKQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdvdG9Db3Vyc2VNZW1iZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvY291cnNlbWVtYmVyLyR7dGhpcy5jb3Vyc2UuY25vfWApCiAgICB9LAogICAgZGVsaXZlcihpbmRleCkgewogICAgICB0aGlzLnNob3dEZWxpdmVyICE9PSBpbmRleCA/IHRoaXMuc2hvd0RlbGl2ZXIgPSBpbmRleDp0aGlzLnNob3dEZWxpdmVyID0gMDsKICAgIH0sCiAgICBkZWVwQ2xvbmUob3JpZ24sdGFyZ2V0KSB7CiAgICAgY29uc3QgdGFyID0gdGFyZ2V0IHx8IHt9OwogICAgICBjb25zdCBhcnJTdHIgPSAiW29iamVjdCBBcnJheV0iOwogICAgICBmb3IgKGNvbnN0IHByb3AgaW4gb3JpZ24pCiAgICAgIHsKICAgICAgICBpZiAob3JpZ24uaGFzT3duUHJvcGVydHkocHJvcCkpICB7CiAgICAgICAgICBpZiAodHlwZW9mKG9yaWduW3Byb3BdKT09J29iamVjdCcmJnR5cGVvZihvcmlnbltwcm9wXSkhPT0idW5kZWZpbmVkIikgewogICAgICAgICAgICB0YXJbcHJvcF09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9yaWduW3Byb3BdKT09PWFyclN0cj9bXTp7fTsKICAgICAgICAgICAgZGVlcENsb25lKG9yaWduW3Byb3BdLHRhcltwcm9wXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0YXJbcHJvcF0gPSBvcmlnbltwcm9wXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRhcjsKICAgIH0sCiAgICBzZW5kKHJlc3RvcmUgPSBmYWxzZSkgewogICAgICBheGlvcy5nZXQoJy9hcGkvdGFza0xpc3Q/Y25vPScgKyB0aGlzLmNvdXJzZS5jbm8pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICB0aGlzLnRhc2tzID0gcmVzLmRhdGE7CiAgICAgICAgaWYgKHJlc3RvcmUpIHsKICAgICAgICAgIHRoaXMudGFza3MuZm9yRWFjaCh0YXNrID0+IHsKICAgICAgICAgICAgdGhpcy5lZGl0aW5nW3Rhc2sudG5vXSA9IGZhbHNlOwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkS2V5ID0gdHJ1ZQogICAgICAgIGNvbnNvbGUubG9nKCJyZWxvYWRlZCIpCiAgICAgIH0pCiAgICB9LAogICAgZGF0ZV9mb3JtYXQoZGF0ZSkgewogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkuZm9ybWF0KCJ5eS9NTS9kZCIpOwogICAgfSwKICAgIHRpbWVfZm9ybWF0KGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLmZvcm1hdCgiaGg6bW0iKTsKICAgIH0sCiAgICBjb21tYW5kSGFuZGxlcihjb21tYW5kKSB7CiAgICAgIGlmIChjb21tYW5kID09PSAnZWRpdCcpIHsKICAgICAgICAvLyB0aGlzLmVkaXRpbmdbdGhpcy5mb2N1c10gPSB0cnVlCiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLmRlZXBDbG9uZSh0aGlzLmVkaXRpbmcpCiAgICAgICAgdGVtcFt0aGlzLmZvY3VzXSA9IHRydWUKICAgICAgICB0aGlzLmVkaXRpbmcgPSB0ZW1wCiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJ2RlbGV0ZScpIHsKICAgICAgICBheGlvcy5wb3N0KCcvYXBpL2RlbGV0ZVRhc2s/dG5vPScrdGhpcy5mb2N1cykudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5zZW5kKCkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgZ290b1JldmlzZSh0YXNrKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiBgL3Rhc2ttYXJrLyR7dGFzay5jbm99LyR7dGFzay50bm99YH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["TeacherTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeacherTask.vue","sourceRoot":"src/views/Task","sourcesContent":["<template>\n   <div class=\"wrapper\">\n    <work-nav :cname=\"course.name\"></work-nav>\n    <div class=\"info-top\">\n      <div class=\"topm\">\n        <h1>{{course.name}}</h1>\n        <div class=\"box-box\">\n          <div class=\"sele\">\n            <div class=\"infotextmain\">加课码: </div>\n            <div class=\"codetext\">{{course.cno}}</div>\n          </div>\n          <ul>\n            <li><div @click=\"gotoCourseMember\">成员: {{course.members + 1}}</div></li>\n            <li><div>成绩管理</div></li>\n          </ul>\n          <div class=\"coursedatabox\" style=\"float: right\">\n            <div class=\"coursedata\">\n              <ul>\n                <li style=\"display: block\">{{tasks.length}}</li>\n                <li>发布作业</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"content\">\n      <el-button type=\"primary\" @click=\"deliver(1)\" plain>发布个人作业</el-button>\n      <el-button type=\"primary\" @click=\"deliver(2)\" plain>发布小组作业</el-button>\n    </div>\n    <PersonalDeliver\n      v-show=\"showDeliver===1\"\n      :cno=\"course.cno\"\n      @deliver=\"deliver\"\n      @send=\"send\"/>\n    <GroupDeliver\n      v-show=\"showDeliver===2\"\n      @deliver=\"deliver\"/>\n    <div v-if=\"loadKey\">\n      <div v-for=\"task in tasks\" :key=\"task.tno\">\n        <div class=\"homework-box\" v-show=\"!editing[task.tno]\">\n          <div class=\"homework-inner\">\n            <div class=\"unique-top\">\n              <div class=\"work-type\">\n                <span class=\"work-type-first-span\">个人作业</span>\n                <span>{{ date_format(task.createDate) }}</span>\n                <span>{{ time_format(task.createDate) }}</span>\n                <el-dropdown @command=\"commandHandler\" @click.native=\"focus=task.tno\" trigger=\"click\" style=\"float: right\">\n                  <span class=\"el-dropdown-link\">· · ·</span>\n                  <el-dropdown-menu slot=\"dropdown\" style=\"width: 200px\">\n                    <el-dropdown-item command=\"edit\">编辑</el-dropdown-item>\n                    <el-dropdown-item command=\"saveTo\">保存到...</el-dropdown-item>\n                    <el-dropdown-item command=\"delete\">删除</el-dropdown-item>\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </div>\n            </div>\n            <div class=\"middle\">\n              <div class=\"unique-count\">\n                <span class=\"score\">\n                  <a>{{ task.judgeNum }}</a>\n                  <a>已批</a>\n                </span>\n                  <span class=\"score\">\n                  <a>{{ task.submitNum - task.judgeNum }}</a>\n                  <a>未批</a>\n                </span>\n                  <span class=\"score\">\n                  <a>{{ course.members - task.submitNum }}</a>\n                  <a>未交</a>\n                </span>\n              </div>\n              <div class=\"unique-title\">\n                <el-link @click=\"gotoRevise(task)\" class=\"work-name\">{{ task.tname }}</el-link>\n                <div>\n                  <span class=\"unique-word\" v-html=\"task.description\"></span>\n                </div>\n              </div>\n            </div>\n            <div class=\"unique-bottom\">\n              <span class=\"work-deadline\">\n                截止日期：\n                <span>{{ date_format(task.endDate) }}</span>\n                <span>{{ time_format(task.endDate) }}</span>\n              </span>\n              <el-link href=\"#\" class=\"work-commend\">0条讨论</el-link>\n            </div>\n          </div>\n        </div>\n        <div v-show=\"editing[task.tno]\">\n          <PersonalDeliver :task=\"task\" :edit=\"true\" @deliver=\"editing[task.tno]=false\" @send=\"send\"/>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios';\n  import PersonalDeliver from \"components/content/PersonalDeliver\";\n  import WorkNav from 'components/content/WorkNav'\n  import GroupDeliver from 'components/content/GroupDeliver'\n  import { request } from '../../network/request';\n\n  export default {\n    name: \"TeacherTask\",\n    components: {PersonalDeliver, WorkNav, GroupDeliver},\n    data() {\n      return {\n        showDeliver: 0,\n        tasks: [],\n        loadKey: false,\n        editing: [],\n        focus: '',\n        course: {}\n      }\n    },\n    mounted() {\n      request({\n        url: '/api/course/getCourseByCno',\n        method: 'get',\n        params: {\n          cno: this.$route.params.cno\n        }\n      }).then(res => {\n        this.course = res.data\n        this.send(true)\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    methods: {\n      gotoCourseMember() {\n        this.$router.push(`/coursemember/${this.course.cno}`)\n      },\n      deliver(index) {\n        this.showDeliver !== index ? this.showDeliver = index:this.showDeliver = 0;\n      },\n      deepClone(orign,target) {\n       const tar = target || {};\n        const arrStr = \"[object Array]\";\n        for (const prop in orign)\n        {\n          if (orign.hasOwnProperty(prop))  {\n            if (typeof(orign[prop])=='object'&&typeof(orign[prop])!==\"undefined\") {\n              tar[prop]=Object.prototype.toString.call(orign[prop])===arrStr?[]:{};\n              deepClone(orign[prop],tar[prop]);\n            } else {\n              tar[prop] = orign[prop];\n            }\n          }\n        }\n        return tar;\n      },\n      send(restore = false) {\n        axios.get('/api/taskList?cno=' + this.course.cno).then(res => {\n          console.log(res.data)\n          this.tasks = res.data;\n          if (restore) {\n            this.tasks.forEach(task => {\n              this.editing[task.tno] = false;\n            })\n          }\n          this.loadKey = true\n          console.log(\"reloaded\")\n        })\n      },\n      date_format(date) {\n        return new Date(date).format(\"yy/MM/dd\");\n      },\n      time_format(date) {\n        return new Date(date).format(\"hh:mm\");\n      },\n      commandHandler(command) {\n        if (command === 'edit') {\n          // this.editing[this.focus] = true\n          let temp = this.deepClone(this.editing)\n          temp[this.focus] = true\n          this.editing = temp\n        } else if (command === 'delete') {\n          axios.post('/api/deleteTask?tno='+this.focus).then(res => {\n            this.send()\n          })\n        }\n      },\n      gotoRevise(task) {\n        this.$router.push({path: `/taskmark/${task.cno}/${task.tno}`})\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .wrapper {\n    width: 83%;\n    margin: auto;\n    font-size: 14px;\n    font-family: 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei ui','microsoft yahei',simsun,sans-serif;\n  }\n  .info-top {\n    margin-top: 105px;\n    width: 96%;\n    height: 200px;\n    background-image: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);\n    margin-bottom: 20px;\n    padding: 48px 0 0 48px;\n    border-radius: 8px;\n  }\n  .topm>h1 {\n    font-size: 36px;\n    color: #fff;\n    font-weight: 500;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .topm .sele {\n    font-size: 15px;\n    color: #fff;\n    text-align: left;\n    height: 24px;\n    line-height: 24px;\n    background-position: 100px 10px;\n    background-size: 14px auto;\n    cursor: pointer;\n    user-select: none;\n    background: rgba(255,255,255,.4);\n    border-radius: 2px;\n    padding-right: 10px;\n    padding-left: 10px;\n    display: inline-block;\n  }\n  .topm .sele+ul li {\n    cursor: pointer;\n  }\n  .infotextmain {\n    display: inline-block;\n    color: #fff;\n    font-size: 12px;\n    height: 24px;\n    line-height: 24px;\n  }\n  .topm .box-box {\n    height: 35px;\n    margin: 20px auto 0;\n    color: #fff;\n  }\n  .topm ul {\n    display: inline-block;\n  }\n  .topm ul li {\n    margin-left: 10px;\n    position: relative;\n    background: rgba(255,255,255,.4);\n    text-align: center;\n    padding-left: 10px;\n    padding-right: 10px;\n    display: inline-block;\n    height: 24px;\n    line-height: 24px;\n  }\n\n  .coursedatabox .coursedata {\n    margin-right: 30px;\n  }\n\n  .coursedatabox .coursedata ul {\n    margin-top: -50px;\n  }\n\n  .coursedatabox .coursedata ul li:first-of-type {\n    font-size: 40px;\n    line-height: 48px;\n    height: 50px;\n  }\n  .coursedatabox .coursedata ul li {\n    background: none;\n  }\n\n  .coursedatabox .coursedata ul li+li {\n    font-size: 12px;\n    line-height: 16px;\n    width: 80px;\n  }\n\n  .codetext {\n    display: inline-block;\n    line-height: 24px;\n    height: 24px;\n  }\n\n  .homework-box {\n    padding: 0 20px 0 40px;\n    border: 1px solid #E2E6ED;\n    border-radius: 8px;\n    background: #FFF;\n    text-align: left;\n    margin-top: 20px;\n  }\n  .work-type {\n    text-align: left;\n    color:#5F6368;\n    font-size: 14px;\n    padding: 21px 0 10px;\n    line-height: 30px;\n  }\n  .work-type span, .unique-bottom span {\n    margin-right: 15px;\n  }\n  .work-type-first-span {\n    background-color: #F1F3F4;\n    padding: 3px 5px;\n  }\n  .unique-title {\n    margin-bottom: 20px;\n    margin-right: 340px;\n  }\n  .unique-word {\n    font-size: 14px;\n    height: 20px;\n    vertical-align: middle;\n    color: #707070;\n  }\n  .el-dropdown-link:hover {\n    cursor: pointer;\n  }\n  .unique-count {\n    float: right;\n    display: flex;\n    justify-content: space-between;\n    text-align: center;\n  }\n  .unique-count span a {\n    display: block;\n    min-width: 80px;\n    padding-left: 15px;\n    color: #707070;\n    padding-right: 15px;\n  }\n  .unique-count span a:first-child {\n    font-size: 30px;\n    height: 44px;\n    line-height: 44px;\n  }\n  .unique-count span a:last-child {\n    font-size: 14px;\n    height: 26px;\n    line-height: 26px;\n  }\n  .unique-bottom {\n    color: #A0A0A0;\n    font-size: 14px;\n    margin-bottom: 20px;\n  }\n  .work-name {\n    font-size: 20px;\n    margin-bottom: 5px;\n  }\n  .work-deadline {\n    margin-right: 40px;\n    vertical-align: top;\n  }\n\n  .homework-box:hover .work-name {\n    color: #4D90FE;\n  }\n</style>\n"]}]}